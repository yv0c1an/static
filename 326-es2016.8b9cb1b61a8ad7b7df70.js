(self.webpackChunkwlc_site=self.webpackChunkwlc_site||[]).push([[326],{20364:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var i=n(50139),s=n(35641),o=n(70626);var a=function(e,t){var n;return(0,o.Z)(e,function(e,i,s){return!(n=t(e,i,s))}),!!n},r=n(74663),l=n(80438);var c=function(e,t,n){var o=(0,r.Z)(e)?i.Z:a;return n&&(0,l.Z)(e,t,n)&&(t=void 0),o(e,(0,s.Z)(t,3))}},39426:function(e,t,n){"use strict";n.d(t,{p:function(){return a}});var i=n(77393),s=n(33637);const o={leading:!0,trailing:!1};function a(e,t=s.P,n=o){return i=>i.lift(new r(e,t,n.leading,n.trailing))}class r{constructor(e,t,n,i){this.duration=e,this.scheduler=t,this.leading=n,this.trailing=i}call(e,t){return t.subscribe(new l(e,this.duration,this.scheduler,this.leading,this.trailing))}}class l extends i.L{constructor(e,t,n,i,s){super(e),this.duration=t,this.scheduler=n,this.leading=i,this.trailing=s,this._hasTrailingValue=!1,this._trailingValue=null}_next(e){this.throttled?this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(c,this.duration,{subscriber:this})),this.leading?this.destination.next(e):this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0))}_complete(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()}clearThrottle(){const e=this.throttled;e&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),e.unsubscribe(),this.remove(e),this.throttled=null)}}function c(e){const{subscriber:t}=e;t.clearThrottle()}},90326:function(e,t,n){"use strict";n.r(t),n.d(t,{UserModule:function(){return _t},components:function(){return bt},services:function(){return yt}});var i=n(64762),s=n(88720),o=n(38583),a=n(13266),r=n(5469),l=n(70258),c=n(39660),d=n(56256),m=n(46797),h=n(31518);let p=class{constructor(e,t,n){this.dataService=e,this.eventService=t,this.logService=n,this.messageTitle=gettext("SMS verification"),this.checkStateCounter=0,this.registerMethods()}send(e,t){return(0,i.__awaiter)(this,void 0,void 0,function*(){const n={phoneCode:e,phoneNumber:t},i=[gettext("Error occurred while sending code for SMS Verification")];try{return(yield this.dataService.request("sms/send",n)).data}catch(s){this.showError((0,h.Z)(i,s.errors)),this.logService.sendLog({code:"15.0.0",data:s})}})}validate(e,t,n,s){return(0,i.__awaiter)(this,void 0,void 0,function*(){const i={token:e,smsCode:t,phoneCode:n,phoneNumber:s},o=[gettext("The code you entered is incorrect")];try{return(yield this.dataService.request("sms/validate",i)).data}catch(a){this.showError(o),this.logService.sendLog({code:"15.0.1",data:a})}})}state(e){return(0,i.__awaiter)(this,void 0,void 0,function*(){try{return(yield this.dataService.request("sms/state",{token:e})).data}catch(t){this.logService.sendLog({code:"15.0.2",data:t})}})}checkState(e,t=5e3){return(0,i.__awaiter)(this,void 0,void 0,function*(){try{const n=yield this.state(e);if(-1!==["Unknown","Sent","Failed","Delivered","Canceled"].indexOf(n.state))return this.checkStateCounter=0,!0;if(this.checkStateCounter++,this.checkStateCounter>2)return this.checkStateCounter=0,!1;(0,m.H)(t).subscribe(()=>this.checkState(e,t))}catch(n){return!1}})}registerMethods(){this.dataService.registerMethod({name:"send",system:"sms",url:"/sms",type:"POST",events:{success:"SMS_SENDING_SUCCEEDED",fail:"SMS_SENDING_FAILED"}}),this.dataService.registerMethod({name:"state",system:"sms",url:"/sms",type:"PATCH"}),this.dataService.registerMethod({name:"validate",system:"sms",url:"/sms",type:"PUT",events:{success:"SMS_VALIDATION_SUCCEEDED",fail:"SMS_VALIDATION_FAILED"}})}showError(e,t=this.messageTitle){this.eventService.emit({name:l.LA.PushMessage,data:{type:"error",title:t,message:e,wlcElement:"sms-error"}})}};p.ctorParameters=()=>[{type:l.Do},{type:l.PO},{type:l.$V}],p=(0,i.__decorate)([(0,s.GSi)({providedIn:"root"})],p);var u=n(55429),g=n(45435),w=n(41589),f=n(67444),v=n(86892),x=n(86093),y=n(73180),b=n(74663);let _=class{constructor(e,t,n,i){this.dataService=e,this.configService=t,this.eventService=n,this.modalService=i,this.registerMethod()}initRealityChecker(e,t){return(0,i.__awaiter)(this,void 0,void 0,function*(){this.configService.get("$base.profile.limitations.use")&&(e.pipe((0,g.h)(e=>!!e)).subscribe(e=>{this.checkPeriod=60*(parseInt(e.extProfile.realityCheckTime)||30)*1e3}),this.loginTime=this.configService.get({name:"realityCheckerTime",storageType:"sessionStorage"}),this.loginTime&&!t||(this.loginTime=u.ou.now().toUTC().toMillis(),this.configService.set({name:"realityCheckerTime",value:this.loginTime,storageType:"sessionStorage"})),this.lastCheck=this.configService.get({name:"realityLastCheckTime",storageType:"sessionStorage"}),this.lastCheck||(this.lastCheck=this.loginTime,this.configService.set({name:"realityLastCheckTime",storageType:"sessionStorage",value:this.lastCheck})),this.eventService.subscribe({name:"LOGOUT"},()=>{var e;null===(e=this.intervalChecker)||void 0===e||e.unsubscribe(),this.configService.set({name:"realityLastCheckTime",storageType:"sessionStorage",value:null}),this.configService.set({name:"realityCheckerTime",storageType:"sessionStorage",value:null})}),this.intervalChecker=(0,m.H)(0,6e4).subscribe(()=>{this.processRealityCheck()}))})}getRealityCheck(e){return(0,i.__awaiter)(this,void 0,void 0,function*(){try{return(yield this.dataService.request("limit/realityCheck",{from:u.ou.fromMillis(e).toUTC().toFormat("yyyy-LL-dd HH:mm:ss")})).data}catch(t){}})}getUserSelfExclusion(){return(0,i.__awaiter)(this,void 0,void 0,function*(){try{return(yield this.dataService.request("limit/getExclusion")).data}catch(e){this.eventService.emit({name:x.LA.PushMessage,data:{type:"error",title:gettext("Error"),message:gettext("Error getting user self exclusion"),wlcElement:"notification_get-self-exclusion-error"}})}})}setUserSelfExclusion(e){return(0,i.__awaiter)(this,void 0,void 0,function*(){try{yield this.dataService.request("limit/setExclusion",e)}catch(t){this.eventService.emit({name:x.LA.PushMessage,data:{type:"error",title:gettext("Error"),message:gettext("Error setting user self exclusion"),wlcElement:"notification_set-self-exclusion-error"}})}})}removeUserSelfExclusion(e){return(0,i.__awaiter)(this,void 0,void 0,function*(){try{if(e){const t={};t[e]=0,yield this.setUserSelfExclusion(t)}else yield this.dataService.request("limit/removeExclusion")}catch(t){this.eventService.emit({name:x.LA.PushMessage,data:{type:"error",title:gettext("Error"),message:gettext("Error remove user self exclusion"),wlcElement:"notification_remove-self-exclusion-error"}})}finally{this.eventService.emit({name:"remove_exclusion"})}})}userSelfDisable(e){return(0,i.__awaiter)(this,void 0,void 0,function*(){const t=u.ou.now().plus({days:e});yield this.dataService.request({name:"userSelfDisable",system:"limit",url:`/profiles/disable?dateTo=${t.toUTC().toSQL({includeOffset:!1})}`,type:"PUT"}),this.eventService.emit({name:"USER_STATUS_DISABLE"})})}processRealityCheck(){var e;return(0,i.__awaiter)(this,void 0,void 0,function*(){if(u.ou.now().toMillis()>this.lastCheck+this.checkPeriod){const t=yield this.getRealityCheck(this.loginTime);null===(e=this.intervalChecker)||void 0===e||e.unsubscribe(),this.intervalChecker=null,this.modalService.showModal({id:"reality-check-info",modalTitle:gettext("Reality check!"),withoutPadding:!0,componentName:"user.wlc-reality-check-info",componentParams:Object.assign({},t),closeBtnVisibility:!0,showFooter:!1,onModalHidden:()=>{!this.intervalChecker&&this.configService.get("$user.isAuthenticated")&&(this.configService.set({name:"realityLastCheckTime",storageType:"sessionStorage",value:null}),this.configService.set({name:"realityCheckerTime",storageType:"sessionStorage",value:null}),this.loginTime=u.ou.now().toMillis(),this.intervalChecker=(0,m.H)(6e4,6e4).subscribe(()=>{this.processRealityCheck()})),this.lastCheck=u.ou.now().toMillis(),this.configService.set({name:"realityLastCheckTime",storageType:"sessionStorage",value:this.lastCheck})}})}})}registerMethod(){this.dataService.registerMethod({name:"getExclusion",url:"/userSelfExclusion",type:"GET",system:"limit",mapFunc:this.mapFunc}),this.dataService.registerMethod({name:"setExclusion",url:"/userSelfExclusion",type:"POST",system:"limit"}),this.dataService.registerMethod({name:"removeExclusion",url:"/userSelfExclusion",type:"DELETE",system:"limit"}),this.dataService.registerMethod({name:"realityCheck",url:"/realityCheck",type:"GET",system:"limit",mapFunc:this.mapFunc})}mapFunc(e){return(0,b.Z)(e)&&1===e.length?e[0]:e}};_.ctorParameters=()=>[{type:y.D},{type:w.E4},{type:f.P},{type:v.Z}],_=(0,i.__decorate)([(0,s.GSi)({providedIn:"root"})],_);var k=n(99120),S=n(87924);let P=class{constructor(e,t,n,i,s,o){this.dataService=e,this.configService=t,this.modalService=n,this.eventService=i,this.logService=s,this.uiRouter=o}continueRegistration(){return(0,i.__awaiter)(this,void 0,void 0,function*(){yield this.configService.ready;try{this.socialRegisterData=(yield this.getSocialData()).data,this.socialRegisterData.registrationBonus=this.configService.get({name:"socialRegBonus",storageType:"localStorage"}),this.configService.set({name:"socialRegBonus",value:null,storageClear:"localStorage"}),this.modalService.showModal("social-register",{formData:this.socialRegisterData})}catch(e){this.logService.sendLog({code:"1.5.4",data:e}),this.eventService.emit({name:l.LA.PushMessage,data:{type:"error",title:gettext("Social"),message:[gettext("Error complete registration via social network, try later.")]}})}})}socialRegisterComplete(e){return(0,i.__awaiter)(this,void 0,void 0,function*(){try{yield this.dataService.request({name:"authSocialPut",url:"/auth/social",system:"user",type:"PUT",events:{success:"SOCIAL_REGISTER_COMPLETE_SUCCESS",fail:"SOCIAL_REGISTER_COMPLETE_FAIL"}},Object.assign(Object.assign({},this.socialRegisterData),e)),this.socialRegisterData=null}catch(t){throw this.logService.sendLog({code:"1.5.3",data:t}),t}})}socialLogin(e){var t;return(0,i.__awaiter)(this,void 0,void 0,function*(){return this.configService.set({name:"socialRegBonus",value:null===(t=this.configService.get(S.fs.ChosenBonus))||void 0===t?void 0:t.id,storageType:"localStorage"}),this.getAuthUrl(e)})}getUserNetworks(){return(0,i.__awaiter)(this,void 0,void 0,function*(){try{return(yield this.dataService.request({name:"authSocialLinkGet",url:"/auth/socialLink",system:"user",type:"GET"})).data||[]}catch(e){this.logService.sendLog({code:"1.5.1",data:e})}})}connectNetwork(e){return(0,i.__awaiter)(this,void 0,void 0,function*(){return this.configService.set({name:"socialState",value:this.uiRouter.current.name,storageType:"localStorage"}),this.getAuthUrl(e)})}disconnectNetwork(e){return(0,i.__awaiter)(this,void 0,void 0,function*(){try{yield this.dataService.request({name:"authSocialLinkDelete",url:"/auth/socialLink",system:"user",type:"DELETE",params:{provider:e},events:{success:"SOCIAL_DISCONNECT_SUCCESS",fail:"SOCIAL_DISCONNECT_FAIL"}})}catch(t){this.logService.sendLog({code:"1.5.2",data:t}),this.eventService.emit({name:l.LA.PushMessage,data:{type:"error",title:gettext("Social"),message:[gettext("Error disconnect social network, try later.")]}})}})}getSocialData(){return(0,i.__awaiter)(this,void 0,void 0,function*(){try{const e=yield this.dataService.request({name:"authSocialGet",url:"/auth/social",system:"user",type:"GET",events:{success:"SOCIAL_REGISTER_COMPLETE_SUCCESS",fail:"SOCIAL_REGISTER_COMPLETE_FAIL"}});if(e.data.social&&e.data.social_uid)return e;throw e}catch(e){throw this.logService.sendLog({code:"1.5.2",data:{message:"success"===e.status?"Wrong social data":"Error",error:e}}),e}})}getAuthUrl(e){var t;return(0,i.__awaiter)(this,void 0,void 0,function*(){try{const n=yield this.dataService.request({name:"authSocialLinkPut",url:"/auth/socialLink",system:"user",type:"PUT",events:{success:"SOCIAL_CONNECT_SUCCESS",fail:"SOCIAL_CONNECT_FAIL"}},{provider:e});if(null===(t=n.data)||void 0===t?void 0:t.authUrl)return n.data.authUrl;throw n}catch(n){this.logService.sendLog({code:"1.5.0",data:{message:"success"===n.status?"No auth url in response":"Error",error:n}}),this.eventService.emit({name:l.LA.PushMessage,data:{type:"error",title:gettext("Social"),message:[gettext("Error connect social network, try later.")]}})}})}};P.ctorParameters=()=>[{type:l.Do},{type:l.E4},{type:l.Z7},{type:l.PO},{type:l.$V},{type:k.UIRouterGlobals}],P=(0,i.__decorate)([(0,s.GSi)({providedIn:"root"})],P);var C=n(22759),E=n(25917),$=n(19773),M=n(39426);let T=class{constructor(e,t,n,i,s,o,a){this.configService=e,this.userService=t,this.router=n,this.transition=i,this.eventService=s,this.modalService=o,this.document=a}init(){this.checkUserIdle(),this.eventService.filter({name:"LOGOUT"}).subscribe({next:()=>{this.clearSubscrition()}})}checkUserIdle(){this.runTimer();const e="app.gameplay"===this.router.current.name;this.createDefaultHandler(e),this.transitionEnter=this.transition.onEnter({to:"app.gameplay"},()=>{this.createDefaultHandler(!0)}),this.transitionLeft=this.transition.onExit({from:"app.gameplay"},()=>{this.createDefaultHandler(!1)})}runTimer(){this.timer&&clearTimeout(this.timer),this.timer=setTimeout(()=>{this.userService.logout(),this.modalService.showModal({id:"idle-logout-info",modalTitle:gettext("Info"),modifier:"info",modalMessage:[gettext("You have been inactive for 30 minutes."),gettext("For your safety, you have been logged out of your account.")],textAlign:"center",dismissAll:!0}),this.clearSubscrition()},18e5)}clearSubscrition(){var e;this.timer&&(clearTimeout(this.timer),this.timer=null),null===(e=this.timerSubscription)||void 0===e||e.unsubscribe(),this.timerSubscription=null,this.transitionEnter(),this.transitionLeft()}createDefaultHandler(e){var t;null===(t=this.timerSubscription)||void 0===t||t.unsubscribe(),this.timerSubscription=(0,C.R)(this.document,"click").pipe((0,$.zg)(t=>e?(0,C.R)(this.document,"mousemove").pipe((0,M.p)(1e3)):(0,E.of)(t))).subscribe(()=>{this.runTimer()})}};T.ctorParameters=()=>[{type:w.E4},{type:d.K},{type:k.UIRouterGlobals},{type:k.TransitionService},{type:f.P},{type:v.Z},{type:Document,decorators:[{type:s.tBr,args:[o.K0]}]}],T=(0,i.__decorate)([(0,s.GSi)({providedIn:"root"})],T);var I=n(26215);const D={class:"wlc-add-profile-info",title:gettext("Add info")};var L=n(29114);let B=class extends l.k8{constructor(e,t,n,i,s,o){super({injectParams:e,defaultParams:D},t),this.injectParams=e,this.configService=t,this.userService=n,this.modalService=i,this.cdr=s,this.eventService=o,this.errors$=new I.X(null),this.isPending=!1}ngOnInit(){super.ngOnInit(this.inlineParams)}onSubmit(e){return(0,i.__awaiter)(this,void 0,void 0,function*(){if(this.isPending)return;this.isPending=!0,this.modalService.showModal("data-is-processing");const t=yield this.userService.updateProfile(e.value,!0);if(!0===t)this.modalService.closeAllModals(),this.eventService.emit({name:l.LA.PushMessage,data:{type:"success",title:gettext("Profile updated successfully"),message:gettext("Your profile has been updated successfully"),wlcElement:"notification_profile-update-success"}});else{const e=["Profile save failed"];t.errors&&((0,L.Z)(t.errors,t=>{e.push(t)}),this.errors$.next(t.errors)),this.modalService.hideModal("data-is-processing"),this.eventService.emit({name:l.LA.PushMessage,data:{type:"error",title:gettext("Profile update failed"),message:e,wlcElement:"notification_profile-update-error"}})}this.isPending=!1,this.cdr.markForCheck()})}};B.ctorParameters=()=>[{type:void 0,decorators:[{type:s.tBr,args:["injectParams"]}]},{type:l.E4},{type:d.K},{type:l.Z7},{type:s.sBO},{type:l.PO}],B.propDecorators={inlineParams:[{type:s.IIB}]},B=(0,i.__decorate)([(0,s.wA2)({selector:"[wlc-add-profile-info]",template:'<div wlc-text-block\n     [textBlockTitle]="$params.title"\n></div>\n\n<div class="{{$class}}__form"\n     wlc-form-wrapper\n     [ngSubmit]="onSubmit.bind(this)"\n     [formData]="$params.formData"\n     [config]="$params.formConfig"\n     [errors]="errors$.asObservable()">\n</div>\n',changeDetection:s.n4l.OnPush,styles:['.wlc-add-profile-info--theme-default:host {\n  position: relative;\n}\n.wlc-add-profile-info--theme-default:host ::ng-deep .wlc-text-block {\n  margin: 0 0 20px;\n}\n.wlc-add-profile-info--theme-default:host ::ng-deep .wlc-phone-field--theme-default {\n  grid-gap: 20px;\n}\n.wlc-add-profile-info--theme-default:host .wlc-add-profile-info__form {\n  padding: 0 0 20px;\n}\n.wlc-add-profile-info--theme-default:host .wlc-add-profile-info__form ::ng-deep .wlc-form {\n  max-width: 100%;\n  display: flex;\n  flex-direction: column;\n  margin: auto;\n}\n@media (min-width: 768px) {\n  .wlc-add-profile-info--theme-default:host .wlc-add-profile-info__form ::ng-deep .wlc-form {\n    max-width: 285px;\n  }\n}\n.wlc-add-profile-info--theme-default:host .wlc-add-profile-info__form ::ng-deep .wlc-form > .wlc-input, .wlc-add-profile-info--theme-default:host .wlc-add-profile-info__form ::ng-deep .wlc-form > .wlc-select, .wlc-add-profile-info--theme-default:host .wlc-add-profile-info__form ::ng-deep .wlc-form > .wlc-birth-field, .wlc-add-profile-info--theme-default:host .wlc-add-profile-info__form ::ng-deep .wlc-form > .wlc-phone-field {\n  margin-bottom: 20px;\n}\n.wlc-add-profile-info--theme-default:host .wlc-add-profile-info__form ::ng-deep .wlc-btn.wlc-btn--submit {\n  margin: 20px auto 0;\n}\n.wlc-add-profile-info--theme-default:host .wlc-add-profile-info__form ::ng-deep .wlc-input.wlc-input--password {\n  position: relative;\n  padding-top: 20px;\n}\n.wlc-add-profile-info--theme-default:host .wlc-add-profile-info__form ::ng-deep .wlc-input.wlc-input--password:before {\n  content: "";\n  position: absolute;\n  top: 0;\n  left: 50%;\n  display: block;\n  width: 100%;\n  height: 2px;\n  background: var(--mc-baseOpacity);\n  transform: translate(-50%, 0);\n}\n.wlc-add-profile-info--theme-default:host .wlc-add-profile-info__form ::ng-deep .wlc-phone-field {\n  padding: 0;\n}\n.wlc-add-profile-info--theme-default:host .wlc-add-profile-info__form ::ng-deep .wlc-phone-field .wlc-select--theme-default {\n  grid-gap: 0;\n}\n.wlc-add-profile-info--theme-default:host .wlc-add-profile-info__form ::ng-deep .wlc-phone-field .wlc-select--theme-default .wlc-select__label {\n  color: var(--fc-labelColor);\n  font-style: normal;\n  font-weight: normal;\n  font-size: 1rem;\n  line-height: 1.45;\n  margin: 0 0 0 10px;\n  line-height: 1.9;\n}\n.wlc-add-profile-info--theme-mod-overflow:host .wlc-add-profile-info__form {\n  display: flex;\n  place-content: center;\n}\n.wlc-add-profile-info--theme-mod-overflow:host .wlc-add-profile-info__form ::ng-deep .wlc-form {\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  margin: 0 -5px;\n}\n.wlc-add-profile-info--theme-mod-overflow:host .wlc-add-profile-info__form ::ng-deep .wlc-form > *[class] {\n  flex-basis: calc(50% - 10px);\n  flex-grow: 1;\n  margin: 0 5px 10px;\n}\n.wlc-add-profile-info--theme-mod-overflow:host .wlc-add-profile-info__form ::ng-deep .wlc-form .wlc-phone-field, .wlc-add-profile-info--theme-mod-overflow:host .wlc-add-profile-info__form ::ng-deep .wlc-form .wlc-birth-field, .wlc-add-profile-info--theme-mod-overflow:host .wlc-add-profile-info__form ::ng-deep .wlc-form .wlc-input--phone, .wlc-add-profile-info--theme-mod-overflow:host .wlc-add-profile-info__form ::ng-deep .wlc-form .wlc-input--password, .wlc-add-profile-info--theme-mod-overflow:host .wlc-add-profile-info__form ::ng-deep .wlc-form .wlc-input--iban-number {\n  flex-basis: 100%;\n}\n.wlc-add-profile-info--theme-mod-overflow:host .wlc-add-profile-info__form ::ng-deep .wlc-form .wlc-btn--submit {\n  flex-basis: auto;\n  flex-grow: 0;\n  margin: 10px auto 0;\n}\n.wlc-add-profile-info--theme-mod-overflow:host .wlc-add-profile-info__form ::ng-deep .wlc-form .form-control__errors {\n  min-width: 100%;\n}']})],B);var O=n(28859);const A={class:"wlc-change-password-form",config:{class:"wlc-form-wrapper",components:[{name:"core.wlc-text-block",params:{common:{textBlockTitle:gettext("Change password")}}},{name:"core.wlc-input",params:{theme:"vertical",wlcElement:"block_password-current",common:{placeholder:gettext("Current password"),type:"password",customModifiers:"right-shift",usePasswordVisibilityBtn:!0},name:"currentPassword",validators:["required"]}},{name:"core.wlc-input",params:{theme:"vertical",wlcElement:"block_password-new",common:{placeholder:gettext("New password"),type:"password",customModifiers:"right-shift",usePasswordVisibilityBtn:!0},name:"newPassword",validators:["required","password",{name:"minLength",options:6},{name:"maxLength",options:50}]}},{name:"core.wlc-input",params:{theme:"vertical",wlcElement:"block_password-confirm",common:{placeholder:gettext("Confirm password"),type:"password",customModifiers:"right-shift",usePasswordVisibilityBtn:!0},name:"newPasswordRepeat",validators:["required",{name:"minLength",options:6},{name:"maxLength",options:50}]}},{name:"core.wlc-button",params:{wlcElement:"button_submit",common:{text:gettext("Save"),type:"submit",customModifiers:"centered"}}}],validators:[{name:"matchingFields",options:["newPassword","newPasswordRepeat"]}]}};let N=class extends O.k{constructor(e,t,n,i,s){super({injectParams:e,defaultParams:A}),this.injectParams=e,this.userService=t,this.modalService=n,this.eventService=i,this.elRef=s}ngSubmit(e){return(0,i.__awaiter)(this,void 0,void 0,function*(){const{currentPassword:t,newPasswordRepeat:n}=e.value;try{e.disable(),yield this.userService.setNewPassword(t,n),this.eventService.emit({name:x.LA.PushMessage,data:{type:"success",title:gettext("Password changed successfully"),message:gettext("Your password has been changed successfully!"),wlcElement:"notification_password-update-success"}}),this.modalService.getActiveModal("change-password")&&this.modalService.hideModal("change-password")}catch(i){this.eventService.emit({name:x.LA.PushMessage,data:{type:"error",title:gettext("Failed to change password"),message:i.errors,wlcElement:"notification_password-update-error"}})}finally{e.enable()}})}};N.ctorParameters=()=>[{type:void 0,decorators:[{type:s.tBr,args:["injectParams"]}]},{type:d.K},{type:v.Z},{type:f.P},{type:s.SBq}],N.propDecorators={inlineParams:[{type:s.IIB}]},N=(0,i.__decorate)([(0,s.wA2)({selector:"[wlc-change-password-form]",template:'<div wlc-form-wrapper [config]="$params.config" [ngSubmit]="ngSubmit.bind(this)"></div>\n',styles:[".wlc-change-password-form--theme-default:host {\n  max-width: 100%;\n  margin: auto;\n}\n@media (min-width: 768px) {\n  .wlc-change-password-form--theme-default:host {\n    max-width: 285px;\n  }\n}\n.wlc-change-password-form--theme-default:host::ng-deep .wlc-input {\n  margin: 0 0 20px;\n}\n.wlc-change-password-form--theme-default:host::ng-deep .wlc-input:last-child {\n  margin-bottom: 0;\n}\n.wlc-change-password-form--theme-default:host::ng-deep .wlc-input .wlc-input__container .wlc-input__input:disabled {\n  color: var(--fc-textColor);\n  -webkit-text-fill-color: var(--fc-textColor);\n  background: var(--fc-inputBg);\n  opacity: 1;\n}\n.wlc-change-password-form--theme-default:host::ng-deep .wlc-btn {\n  margin: 40px auto 10px;\n}"]})],N);var j=n(46782),U=n(66888),V=n(89592);const R={class:"wlc-loyalty-block"};let F=class extends O.k{constructor(e,t,n,i,s){super({injectParams:e,defaultParams:R}),this.injectParams=e,this.configService=t,this.UserService=n,this.cdr=i,this.modalService=s}ngOnInit(){super.ngOnInit(this.inlineParams),this.UserService.userInfo$.pipe((0,j.R)(this.$destroy),(0,U.n)(e=>!e)).subscribe(()=>{this.cdr.markForCheck()})}};F.ctorParameters=()=>[{type:void 0,decorators:[{type:s.tBr,args:["injectParams"]}]},{type:l.E4},{type:d.K},{type:s.sBO},{type:V.Z7}],F.propDecorators={inlineParams:[{type:s.IIB}]},F=(0,i.__decorate)([(0,s.wA2)({selector:"[wlc-dashboard-loyalty-block]",template:'<div class="{{$class}}__user-name"  data-wlc-element="user-name">\n    <div wlc-user-name [userNameLength]="50"></div>\n    <div wlc-logout [useText]="true"></div>\n</div>\n<div class="{{$class}}__loyalty" wlc-loyalty-progress></div>\n<div class="{{$class}}__all">\n    <a uiSref="app.profile.loyalty-level" data-wlc-element="link_loyalty-levels">\n        {{\'All levels\' | translate}}\n        <span wlc-icon iconPath="/wlc/icons/arrow.svg"></span>\n    </a>\n</div>\n',changeDetection:s.n4l.OnPush,styles:[".wlc-loyalty-block:host {\n  padding: 20px;\n  display: grid;\n  grid-gap: 10px;\n  gap: 10px;\n  background: var(--mc-bg300);\n  border-radius: 10px;\n}\n@media (min-width: 900px) {\n  .wlc-loyalty-block:host {\n    padding: 15px 20px;\n  }\n}\n@media (min-width: 1630px) {\n  .wlc-loyalty-block:host {\n    padding: 20px;\n  }\n}\n.wlc-loyalty-block__all {\n  text-align: center;\n  line-height: 1;\n}\n@media (min-width: 900px) {\n  .wlc-loyalty-block__all {\n    text-align: left;\n  }\n}\n.wlc-loyalty-block__all a {\n  color: var(--mc-main);\n  font-style: normal;\n  font-weight: bold;\n  font-size: 1.4rem;\n  line-height: 1.45;\n  text-decoration: none;\n}\n.wlc-loyalty-block__all a .wlc-icon::ng-deep .wlc-icon-content {\n  display: inline-flex;\n}\n.wlc-loyalty-block__all a .wlc-icon::ng-deep svg {\n  transform: rotate(-90deg);\n  fill: var(--mc-main);\n}\n@media (pointer: fine) {\n  .wlc-loyalty-block__all a:hover {\n    transition: color 0.3s linear;\n    color: var(--mc-baseMain);\n  }\n  .wlc-loyalty-block__all a:hover .wlc-icon::ng-deep svg {\n    transition: fill 0.3s linear;\n    fill: var(--mc-baseMain);\n  }\n}\n.wlc-loyalty-block__user-name {\n  display: grid;\n  grid-template-columns: 1fr auto;\n  align-items: center;\n}\n.wlc-loyalty-block__user-name .wlc-logout {\n  display: none;\n}\n@media (min-width: 640px) {\n  .wlc-loyalty-block__user-name .wlc-logout {\n    display: block;\n  }\n}\n.wlc-loyalty-block__user-name .wlc-logout ::ng-deep svg {\n  width: 17px;\n  margin: 0 0 0 5px;\n  vertical-align: sub;\n}"]})],F);const Z={class:"wlc-exchange"};let q=class extends O.k{constructor(e,t,n,i,s){super({injectParams:e,defaultParams:Z}),this.injectParams=e,this.configService=t,this.UserService=n,this.cdr=i,this.modalService=s}ngOnInit(){var e,t;super.ngOnInit(this.inlineParams),this.points=null===(t=null===(e=this.UserService.userInfo)||void 0===e?void 0:e.loyalty)||void 0===t?void 0:t.Balance,this.cdr.markForCheck(),this.UserService.userInfo$.pipe((0,j.R)(this.$destroy),(0,U.n)(e=>!e)).subscribe(e=>{this.points=e.loyalty.Balance,this.cdr.markForCheck()})}};q.ctorParameters=()=>[{type:void 0,decorators:[{type:s.tBr,args:["injectParams"]}]},{type:l.E4},{type:d.K},{type:s.sBO},{type:V.Z7}],q.propDecorators={inlineParams:[{type:s.IIB}]},q=(0,i.__decorate)([(0,s.wA2)({selector:"[wlc-exchange]",template:'<div class="{{$class}}__content">\n    <div class="{{$class}}-points" data-wlc-element="exchange-points">\n        <div class="{{$class}}-points__value">\n            <span *ngIf="points; else unknown"\n                  wlc-currency\n                  currency="LP"\n                  [value]="points"></span>\n\n            <ng-template #unknown>{{\'Unknown\' | translate}}</ng-template>\n            \n            <span wlc-tooltip\n                  class="{{$class}}-icon__description-currency"\n                  [inlineParams]="{modal: \'descriptionCasinosCurrency\'}"></span>\n        </div>\n\n        <div class="{{$class}}-points__desc">{{\'Available for exchange\' | translate}}</div>\n    </div>\n    <button wlc-button\n            sref="app.profile.loyalty-store.main"\n            text="Exchange to cash"\n            themeMod="secondary"\n            [wlcElement]="\'button_exchange-to-cash\'"></button>\n</div>\n<div wlc-user-stats\n     class="{{$class}}__info"\n     [useDepositBtn]="false"\n></div>\n',changeDetection:s.n4l.OnPush,styles:['.wlc-exchange:host {\n  padding: 20px 20px 5px;\n  min-height: 150px;\n  display: grid;\n  width: 100%;\n  background: var(--mc-bg300);\n  border-radius: 10px;\n  overflow: hidden;\n  grid-template-columns: 1fr;\n  grid-gap: 10px;\n}\n@media (min-width: 640px) {\n  .wlc-exchange:host {\n    padding: 15px 0;\n  }\n}\n@media (min-width: 900px) {\n  .wlc-exchange:host {\n    padding: 15px 0;\n  }\n}\n@media (min-width: 1630px) {\n  .wlc-exchange:host {\n    padding: 20px 0;\n  }\n}\n.wlc-exchange:host .wlc-exchange {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.wlc-exchange:host .wlc-exchange-points {\n  position: relative;\n  display: flex;\n  flex-wrap: wrap;\n  align-items: flex-end;\n  justify-content: center;\n  width: 100%;\n}\n.wlc-exchange:host .wlc-exchange-points__value {\n  position: static;\n  color: var(--mc-baseMain);\n  font-style: normal;\n  font-weight: bold;\n  font-size: 2.4rem;\n  line-height: 1.45;\n  display: flex;\n  align-items: center;\n  margin: 0;\n  padding: 5px 20px 0;\n  color: var(--mc-baseMain);\n  line-height: 1;\n}\n@media (min-width: 640px) {\n  .wlc-exchange:host .wlc-exchange-points__value {\n    position: relative;\n  }\n}\n.wlc-exchange:host .wlc-exchange-points__currency {\n  color: var(--mc-baseMain);\n  font-style: normal;\n  font-weight: normal;\n  font-size: 1.2rem;\n  line-height: 1.45;\n  color: var(--mc-baseMain);\n  line-height: 1;\n}\n.wlc-exchange:host .wlc-exchange-points__currency ::ng-deep .wlc-icon {\n  position: relative;\n  top: 2px;\n}\n.wlc-exchange:host .wlc-exchange-points__currency ::ng-deep .wlc-icon svg {\n  width: 16px;\n  height: 16px;\n}\n.wlc-exchange:host .wlc-exchange-points__desc {\n  color: var(--mc-baseMain);\n  font-style: normal;\n  font-weight: normal;\n  font-size: 1.2rem;\n  line-height: 1.45;\n  width: 100%;\n  margin: 5px 0 0;\n  text-align: center;\n}\n.wlc-exchange:host .wlc-exchange-icon__description-currency {\n  position: absolute;\n  top: 0;\n  right: 0;\n  transform: none;\n}\n.wlc-exchange:host .wlc-exchange-icon__description-currency.wlc-tooltip ::ng-deep .wlc-icon svg {\n  width: 21px;\n  height: 21px;\n}\n@media (min-width: 640px) {\n  .wlc-exchange:host .wlc-exchange-icon__description-currency.wlc-tooltip ::ng-deep .wlc-icon svg {\n    width: 17px;\n  }\n}\n@media (min-width: 640px) {\n  .wlc-exchange:host .wlc-exchange-icon__description-currency.wlc-tooltip ::ng-deep .wlc-icon svg {\n    height: 17px;\n  }\n}\n.wlc-exchange:host .wlc-exchange__content {\n  padding: 0 0 20px;\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n}\n@media (min-width: 640px) {\n  .wlc-exchange:host .wlc-exchange__content {\n    padding: 0 20px;\n  }\n}\n@media (min-width: 1420px) {\n  .wlc-exchange:host .wlc-exchange__content {\n    padding: 0 40px;\n  }\n}\n.wlc-exchange:host .wlc-exchange__content:before {\n  content: "";\n  position: absolute;\n  display: block;\n  max-width: 215px;\n}\n@media (min-width: 640px) {\n  .wlc-exchange:host .wlc-exchange__content:before {\n    left: 100%;\n  }\n}\n@media (min-width: 640px) {\n  .wlc-exchange:host .wlc-exchange__content:before {\n    top: 50%;\n  }\n}\n@media (min-width: 640px) {\n  .wlc-exchange:host .wlc-exchange__content:before {\n    width: 1px;\n  }\n}\n@media (min-width: 640px) {\n  .wlc-exchange:host .wlc-exchange__content:before {\n    height: 100%;\n  }\n}\n@media (min-width: 640px) {\n  .wlc-exchange:host .wlc-exchange__content:before {\n    transform: translate(0, -50%);\n  }\n}\n@media (min-width: 640px) {\n  .wlc-exchange:host .wlc-exchange__content:before {\n    background: var(--mc-baseOpacity);\n  }\n}\n.wlc-exchange:host .wlc-exchange__info {\n  padding: 0;\n  align-self: center;\n}\n@media (min-width: 640px) {\n  .wlc-exchange:host .wlc-exchange__info {\n    padding: 0 20px;\n  }\n}\n@media (min-width: 1420px) {\n  .wlc-exchange:host .wlc-exchange__info {\n    padding: 0 40px;\n  }\n}\n.wlc-exchange:host .wlc-btn {\n  margin: 20px 0 0;\n}\n@media (min-width: 900px) {\n  .wlc-exchange:host .wlc-btn {\n    margin: 15px 0 0;\n  }\n}\n.wlc-exchange:host ::ng-deep .wlc-user-stats-balance[class] {\n  padding: 5px 15px;\n  background: none;\n}\n@media (min-width: 640px) {\n  .wlc-exchange:host {\n    grid-template-columns: 1fr 1fr;\n    grid-auto-flow: column;\n    grid-gap: 0;\n  }\n}']})],q);const G={class:"wlc-icon-exp-lp"};let K=class extends O.k{constructor(e,t){super({injectParams:e,defaultParams:G}),this.injectParams=e,this.configService=t}ngOnInit(){super.ngOnInit(this.inlineParams),this.siteName=this.configService.get("$base.site.name")}};K.ctorParameters=()=>[{type:void 0,decorators:[{type:s.tBr,args:["injectParams"]}]},{type:w.E4}],K.propDecorators={inlineParams:[{type:s.IIB}]},K=(0,i.__decorate)([(0,s.wA2)({selector:"[wlc-icon-exp-lp]",template:'<div class="{{$class}}-description">\n    <p class="{{$class}}-description__title">{{\'What are these diamonds\' | translate}}?</p>\n    <p class="{{$class}}-description__text">\n        <ng-container [ngTemplateOutlet]="refEXP"></ng-container>\n        - {{\'experience points. Experience points allow players to move up from level to level getting more effective bet-to-points conversion ratio\' | translate}}.\n    </p>\n    <p class="{{$class}}-description__text">\n        <ng-container [ngTemplateOutlet]="refLP"></ng-container>\n        - {{\'internal currency for\' | translate}} {{siteName}}.\n    </p>\n</div>\n\n<div class="{{$class}}-description">\n    <p class="{{$class}}-description__title">{{\'How can you get Experience point and Casino Currency\' | translate}}?\n    </p>\n    <p class="{{$class}}-description__text">{{\'You can get Experience point and Casino Currency for every bet in our casino. Experience point and Casino Currency depend upon your bet amount.\' | translate}}</p>\n</div>\n\n<div class="{{$class}}-description">\n    <p class="{{$class}}-description__title">{{\'How can you use Experience point and Casino Currency\' | translate}}?\n    </p>\n    <p class="{{$class}}-description__text">{{\'You can spend Experience point and Casino Currency on bonuses and items in our store, or use them for participation in special tournaments.\' | translate}}</p>\n</div>\n\n<ng-template #refLP>\n    <span wlc-currency\n          currency="LP"\n          [showIconOnly]="true"></span>\n</ng-template>\n<ng-template #refEXP>\n    <span wlc-currency\n          currency="EXP"\n          [showIconOnly]="true"></span>\n</ng-template>\n',changeDetection:s.n4l.OnPush,styles:[".wlc-icon-exp-lp-description {\n  margin: 0 0 20px 0;\n  text-align: left;\n}\n.wlc-icon-exp-lp-description:last-child {\n  margin: 0;\n}\n.wlc-icon-exp-lp-description__title {\n  color: #fff;\n  font-style: normal;\n  font-weight: bold;\n  font-size: 1.4rem;\n  line-height: 1.45;\n  margin: 0 0 20px;\n}\n.wlc-icon-exp-lp-description__text {\n  color: #fff;\n  font-style: normal;\n  font-weight: normal;\n  font-size: 1.4rem;\n  line-height: 1.45;\n}\n.wlc-icon-exp-lp-description__text + .wlc-icon-exp-lp-description__text {\n  margin: 20px 0 0;\n}\n.wlc-icon-exp-lp-description ::ng-deep .wlc-currency svg {\n  width: 15px;\n  height: 15px;\n  vertical-align: sub;\n}"]})],K);var z=n(25884);const H={MaxDepositSumDay:gettext("Daily deposit limit"),MaxBetSumDay:gettext("Daily bet limit"),MaxLossSumDay:gettext("Daily lost limit"),MaxDepositSumWeek:gettext("Weekly deposit limit"),MaxBetSumWeek:gettext("Weekly bet limit"),MaxLossSumWeek:gettext("Weekly lost limit"),MaxDepositSumMonth:gettext("Monthly deposit limit"),MaxBetSumMonth:gettext("Monthly bet limit"),MaxLossSumMonth:gettext("Monthly lost limit")},W=Object.keys(H),Y={class:"wlc-limit-cancel"};let X=class extends l.k8{constructor(e,t,n,i){super({injectParams:e,defaultParams:Y}),this.params=e,this.limitationService=t,this.cdr=n,this.modalService=i,this.cancelable=!1,this.pending=!1}ngOnInit(){super.ngOnInit(),W.includes(this.$params.value)&&(this.cancelable=!0)}cancel(){return(0,i.__awaiter)(this,void 0,void 0,function*(){this.pending||(this.pending=!0,this.modalService.showModal({id:"limit-cancel-confirm",modalTitle:gettext("Confirmation"),modifier:"confirmation",modalMessage:gettext("Are you sure?"),showConfirmBtn:!0,closeBtnParams:{themeMod:"secondary",common:{text:gettext("No")}},confirmBtnText:gettext("Yes"),textAlign:"center",onConfirm:()=>(0,i.__awaiter)(this,void 0,void 0,function*(){try{return yield this.limitationService.removeUserSelfExclusion(this.$params.value)}catch(e){}}),onModalHide:()=>{this.pending=!1},dismissAll:!0}))})}};X.ctorParameters=()=>[{type:void 0,decorators:[{type:s.tBr,args:["injectParams"]}]},{type:_},{type:s.sBO},{type:l.Z7}],X=(0,i.__decorate)([(0,s.wA2)({selector:"[wlc-limit-cancel]",template:'<button *ngIf="cancelable; else noCancel"\n        wlc-button\n        [attr.type]="\'button\'"\n        themeMod="secondary"\n        text="Cancel"\n        [type]="pending ? \'pending\' : \'default\'"\n        [wlcElement]="\'button_cancel\'"\n        (click)="cancel()">\n</button>\n\n<ng-template #noCancel>\n    <div class="no-cancel">\n        -\n    </div>\n</ng-template>\n',styles:[".wlc-limit-cancel:host {\n  display: inline-flex;\n}"]})],X);const J={class:"wlc-limit-value"};let Q=class extends l.k8{constructor(e,t,n,i,s){super({injectParams:e,defaultParams:J}),this.params=e,this.limitationService=t,this.cdr=n,this.modalService=i,this.translate=s}ngOnInit(){if(super.ngOnInit(),"realityChecker"===this.$params.valueType){const e=parseInt(this.$params.value,10);e>=60?(this.timeText=Math.floor(e/60)+" "+this.translate.instant(Math.floor(e/60)<2?gettext("Hour"):gettext("Hours")),e%60!=0&&(this.timeText+=" "+e%60+" "+this.translate.instant(gettext("Minutes")))):this.timeText=e+" "+this.translate.instant(gettext("Minutes"))}}};Q.ctorParameters=()=>[{type:void 0,decorators:[{type:s.tBr,args:["injectParams"]}]},{type:_},{type:s.sBO},{type:l.Z7},{type:r.sK}],Q=(0,i.__decorate)([(0,s.wA2)({selector:"[wlc-limit-value]",template:'<ng-container *ngIf="$params.valueType === \'realityChecker\'; else amount">\n    <span>{{timeText}}</span>\n</ng-container>\n\n<ng-template #amount>\n    <span wlc-currency [value]="$params.value"></span>\n</ng-template>\n',styles:[".wlc-limit-cancel:host {\n  display: inline-flex;\n}"]})],Q);const ee={class:"wlc-limitations"},te=[{key:"typeText",title:gettext("Limit Type"),type:"text",order:10,wlcElement:"wlc-profile-table__cell_type"},{key:"amountValue",title:gettext("Value"),type:"component",order:20,componentClass:Q,wlcElement:"wlc-profile-table__cell_amount"},{key:"type",title:gettext("Action"),type:"component",order:30,componentClass:X,wlcElement:"wlc-profile-table__cell_action"}],ne={name:"core.wlc-select",params:{name:"limitType",labelText:gettext("Limit Type"),wlcElement:"limit-type",common:{placeholder:gettext("Limit Type"),tooltipModal:"staticText",tooltipModalParams:{slug:"responsible-game"}},validators:["required"],items:[{title:gettext("Deposit Limit"),value:"MaxDepositSum"},{title:gettext("Wager Limit"),value:"MaxBetSum"},{title:gettext("Loss Limit"),value:"MaxLossSum"},{title:gettext("Reality checker"),value:"realityChecker"},{title:gettext("Time out"),value:"timeOut"}]}},ie={name:"core.wlc-input",params:{name:"limitAmount",customMod:["amount"],showCurrency:!0,common:{placeholder:gettext("Amount"),customModifiers:"right-shift",type:"number"},wlcElement:"limit_amount",validators:["required","numberDecimal"],prohibitedPattern:/[^\d,.]/}},se={name:"core.wlc-select",params:{name:"limitPeriod",labelText:gettext("Period"),wlcElement:"limit-period",common:{placeholder:gettext("Period")},validators:["required"],items:[{title:gettext("Each day"),value:"Day"},{title:gettext("Each Week"),value:"Week"},{title:gettext("Each Month"),value:"Month"}]}},oe={name:"core.wlc-button",params:{name:"submit",common:{text:gettext("Save")}}},ae={name:"core.wlc-select",params:{name:"limitTime",labelText:gettext("Limit Time"),wlcElement:"limit-time",common:{placeholder:gettext("Limit Time")},validators:["required"],items:[{title:gettext("30 Minutes"),value:"30"},{title:gettext("1 Hour"),value:"60"},{title:gettext("5 Hours"),value:"300"}]}},re={name:"core.wlc-select",params:{name:"limitTime",labelText:gettext("Limit Time"),wlcElement:"limit-time",common:{placeholder:gettext("Limit Time")},validators:["required"],items:[{title:gettext("1 Day"),value:"1"},{title:gettext("1 Week"),value:"7"},{title:gettext("1 Month"),value:"30"},{title:gettext("Indefinite"),value:"36525"}]}};let le=class extends l.k8{constructor(e,t,n,i,s,o){super({injectParams:e,defaultParams:ee}),this.params=e,this.userService=t,this.limitationService=n,this.eventService=i,this.modalService=s,this.cdr=o,this.loading=!0,this.formConfig={class:"wlc-form-wrapper",components:[ne,ie,se,oe]},this.formData=new I.X({}),this.limits=new I.X([]),this.pending=!1,this.tableData={noItemsText:gettext("No limitations set"),head:te,rows:this.limits}}ngOnInit(){const e=Object.create(null,{ngOnInit:{get:()=>super.ngOnInit}});return(0,i.__awaiter)(this,void 0,void 0,function*(){e.ngOnInit.call(this,this.inlineParams),yield this.getLimits(),this.eventService.subscribe({name:"remove_exclusion"},()=>{this.getLimits()},this.$destroy),this.eventService.subscribe({name:"SELECT_CHOSEN_LIMITTYPE"},e=>{switch(e.value){case"realityChecker":this.formConfig={class:this.formConfig.class,components:[ne,ae,oe]};break;case"timeOut":this.formConfig={class:this.formConfig.class,components:[ne,re,oe]};break;default:this.formConfig={class:this.formConfig.class,components:[ne,ie,se,oe]}}this.formData.next(this.form.value)},this.$destroy)})}getForm(e){this.form=e}onSubmit(e){return(0,i.__awaiter)(this,void 0,void 0,function*(){if(!this.pending){switch(this.pending=!0,e.value.limitType){case"MaxDepositSum":case"MaxBetSum":case"MaxLossSum":try{const t={};t[`${e.value.limitType}${e.value.limitPeriod}`]=e.value.limitAmount,yield this.limitationService.setUserSelfExclusion(t)}catch(t){}break;case"realityChecker":try{yield this.userService.updateProfile({extProfile:{realityCheckTime:e.value.limitTime}},!0)}catch(t){}break;case"timeOut":return void this.modalService.showModal({id:"limit-cancel-confirm",modalTitle:gettext("Confirmation"),modifier:"confirmation",modalMessage:gettext("Are you sure?"),showConfirmBtn:!0,closeBtnParams:{themeMod:"secondary",common:{text:gettext("No")}},confirmBtnText:gettext("Yes"),textAlign:"center",onConfirm:()=>(0,i.__awaiter)(this,void 0,void 0,function*(){try{yield this.limitationService.userSelfDisable(parseInt(e.value.limitTime,10))}catch(t){}}),onModalHide:()=>{this.pending=!1},dismissAll:!0})}yield this.getLimits(),this.pending=!1}})}getLimits(){return(0,i.__awaiter)(this,void 0,void 0,function*(){this.loading=!0;const e=[];yield this.userService.userProfile$.pipe((0,z.P)(e=>!!e)).toPromise(),this.userService.userProfile.extProfile.realityCheckTime&&e.push({type:"realityChecker",typeText:gettext("Reality checker"),amountValue:{valueType:"realityChecker",value:this.userService.userProfile.extProfile.realityCheckTime}});const t=yield this.limitationService.getUserSelfExclusion();(0,L.Z)(t,(t,n)=>{H[n]&&"0"!==t&&e.push({type:n,typeText:H[n],amountValue:{valueType:n,value:t}})}),this.limits.next(e),this.loading=!1,this.cdr.markForCheck()})}};le.ctorParameters=()=>[{type:void 0,decorators:[{type:s.tBr,args:["injectParams"]}]},{type:d.K},{type:_},{type:l.PO},{type:l.Z7},{type:s.sBO}],le.propDecorators={inlineParams:[{type:s.IIB}],useText:[{type:s.IIB}]},le=(0,i.__decorate)([(0,s.wA2)({selector:"[wlc-limitations]",template:'\n<div class="{{$class}}__wrap"\n    wlc-form-wrapper\n    [config]="formConfig"\n    [formData]="formData"\n    (form$)="getForm($event)"\n    [ngSubmit]="onSubmit.bind(this)">\n</div>\n\n<div class="{{$class}}-list" *ngIf="!loading; else loader">\n    <div wlc-table [inlineParams]=\'tableData\'></div>\n</div>\n\n<ng-template #loader>\n    <div wlc-loader></div>\n</ng-template>\n',styles:[".wlc-limitations--theme-default:host .wlc-limitations-list {\n  margin-top: 40px;\n}\n.wlc-limitations--theme-default:host ::ng-deep .wlc-form {\n  grid-template-columns: minmax(auto, 1fr);\n  display: grid;\n  align-items: end;\n  justify-content: start;\n  grid-column-gap: 15px;\n  -moz-column-gap: 15px;\n       column-gap: 15px;\n  grid-row-gap: 20px;\n  row-gap: 20px;\n}\n@media (min-width: 560px) {\n  .wlc-limitations--theme-default:host ::ng-deep .wlc-form {\n    grid-template-columns: minmax(auto, 400px);\n  }\n}\n@media (min-width: 1024px) {\n  .wlc-limitations--theme-default:host ::ng-deep .wlc-form {\n    grid-template-columns: repeat(3, minmax(auto, 240px));\n  }\n}\n@media (min-width: 1630px) {\n  .wlc-limitations--theme-default:host ::ng-deep .wlc-form {\n    grid-template-columns: repeat(4, minmax(auto, 240px));\n  }\n}\n.wlc-limitations--theme-default:host ::ng-deep .wlc-table--theme-default[class] .wlc-table__cell--type {\n  padding: 1px 15px;\n}\n@media (min-width: 1024px) {\n  .wlc-limitations--theme-default:host ::ng-deep .wlc-table--theme-default[class] .wlc-table__cell--type {\n    padding: 5px 10px;\n  }\n}\n.wlc-limitations--theme-default:host ::ng-deep .wlc-btn {\n  margin: 0 auto;\n  width: auto;\n  height: 40px;\n}\n@media (min-width: 560px) {\n  .wlc-limitations--theme-default:host ::ng-deep .wlc-btn {\n    margin: 0 auto 0 0;\n  }\n}"]})],le);const ce={class:"wlc-logout"};let de=class extends O.k{constructor(e,t,n,i){super({injectParams:e,defaultParams:ce}),this.params=e,this.cdr=t,this.modalService=n,this.userService=i}ngOnInit(){super.ngOnInit(this.inlineParams),this.$params.useText=this.$params.useText||this.useText}logout(){this.modalService.showModal({id:"logout-confirm",modalTitle:gettext("Confirmation"),modifier:"confirmation",wlcElement:"modal_logout",modalMessage:gettext("Are you sure?"),showConfirmBtn:!0,closeBtnParams:{themeMod:"secondary",wlcElement:"button_no",common:{text:gettext("No")}},confirmBtnParams:{wlcElement:"button_yes",common:{text:gettext("Yes")}},textAlign:"center",onConfirm:()=>{this.userService.logout()},dismissAll:!0})}};de.ctorParameters=()=>[{type:void 0,decorators:[{type:s.tBr,args:["injectParams"]}]},{type:s.sBO},{type:v.Z},{type:d.K}],de.propDecorators={inlineParams:[{type:s.IIB}],useText:[{type:s.IIB}]},de=(0,i.__decorate)([(0,s.wA2)({selector:"[wlc-logout]",template:'<button\n    wlc-button\n    class="{{$class}}-logout"\n    [text]="$params.useText && \'Sign out\'"\n    wlcElement="link-logout"\n    theme="icon"\n    iconPath="/wlc/icons/logout.svg"\n    (click)="logout()"\n></button>\n',styles:[".wlc-logout--theme-default:host .wlc-btn {\n  display: flex;\n}\n.wlc-logout--theme-default:host .wlc-btn ::ng-deep .wlc-btn__text {\n  color: var(--mc-baseOpacity);\n  font-style: normal;\n  font-weight: bold;\n  font-size: 1.4rem;\n  line-height: 1.45;\n  display: flex;\n  align-items: center;\n}\n.wlc-logout--theme-default:host .wlc-btn ::ng-deep .wlc-icon path {\n  fill: var(--mc-baseOpacity);\n  stroke: var(--mc-baseOpacity);\n}\n@media (pointer: fine) {\n  .wlc-logout--theme-default:host .wlc-btn:hover ::ng-deep .wlc-btn__text {\n    transition: color 0.3s linear;\n    color: var(--mc-baseMain);\n  }\n  .wlc-logout--theme-default:host .wlc-btn:hover ::ng-deep ::ng-deep path {\n    transition: all 0.3s linear;\n    fill: var(--mc-baseMain);\n    stroke: var(--mc-baseMain);\n  }\n}"]})],de);n(55099),n(12634);const me={moduleName:"user",componentName:"wlc-loyalty-progress",class:"wlc-loyalty-progress",common:{maxProgressText:gettext("Max")}};let he=class extends l.k8{constructor(e,t,n,i,s){super({injectParams:e,defaultParams:me},t),this.injectParams=e,this.configService=t,this.UserService=n,this.cdr=i,this.modalService=s}ngOnInit(){super.ngOnInit(this.inlineParams),this.subscribeUserInfo()}subscribeUserInfo(){this.UserService.userInfo$.pipe((0,U.n)(e=>!e),(0,j.R)(this.$destroy)).subscribe(e=>{this.levelName=e.levelName,this.userPoints=e.points,this.nextLevelPoints=e.nextLevelPoints,this.percentProgress=this.nextLevelPoints?this.userPoints/this.nextLevelPoints*100:100,this.cdr.markForCheck()})}};he.ctorParameters=()=>[{type:void 0,decorators:[{type:s.tBr,args:["injectParams"]}]},{type:l.E4},{type:d.K},{type:s.sBO},{type:l.Z7}],he.propDecorators={inlineParams:[{type:s.IIB}]},he=(0,i.__decorate)([(0,s.wA2)({selector:"[wlc-loyalty-progress]",template:'<div class="{{$class}}__content" data-wlc-element="block_game-play-info-exp-line">\n    <div class="{{$class}}__title" data-wlc-element="user-loyalty-title">{{levelName}}</div>\n    <div class="{{$class}}__line">\n        <div class="{{$class}}__line-current"\n             [ngStyle]="{\'width\' :  percentProgress + \'%\'}"></div>\n        <div class="{{$class}}__line-sum"></div>\n    </div>\n    <div class="{{$class}}__points" data-wlc-element="user-loyalty-points">\n        <div wlc-currency \n             class="{{$class}}__points-start"\n             currency=""\n             [showValueOnly]="true"\n             [value]="userPoints">\n        </div>\n        <div class="{{$class}}__points-end">\n            <ng-container *ngIf="percentProgress < 100; else maxLevel">{{nextLevelPoints}}</ng-container>\n        </div>\n    </div>\n</div>\n\n<ng-template #maxLevel>\n    {{$params.common.maxProgressText | translate}}\n</ng-template>\n',changeDetection:s.n4l.OnPush,styles:['.wlc-loyalty-progress--theme-default:host .wlc-loyalty-progress__content {\n  display: grid;\n  grid-gap: 5px;\n  gap: 5px;\n  margin: 0;\n}\n.wlc-loyalty-progress--theme-default:host .wlc-loyalty-progress__line {\n  position: relative;\n  width: 100%;\n  height: 7px;\n  background: var(--fc-inputBg);\n  border-radius: 100px;\n  overflow: hidden;\n}\n.wlc-loyalty-progress--theme-default:host .wlc-loyalty-progress__line-current {\n  position: absolute;\n  top: 0;\n  left: 0;\n  height: 100%;\n  background: var(--mc-main);\n  border-radius: 100px;\n}\n.wlc-loyalty-progress--theme-default:host .wlc-loyalty-progress__title {\n  color: var(--mc-baseMain);\n  font-style: normal;\n  font-weight: bold;\n  font-size: 1.4rem;\n  line-height: 1.45;\n  color: var(--mc-baseMain);\n}\n.wlc-loyalty-progress--theme-default:host .wlc-loyalty-progress__title:after {\n  content: "-";\n  display: inline-block;\n  width: 0;\n  opacity: 0;\n  overflow: hidden;\n  pointer-events: none;\n}\n.wlc-loyalty-progress--theme-default:host .wlc-loyalty-progress__points {\n  color: var(--mc-baseMain);\n  font-style: normal;\n  font-weight: bold;\n  font-size: 1.4rem;\n  line-height: 1.45;\n  display: flex;\n  justify-content: space-between;\n}\n.wlc-loyalty-progress--theme-default:host .wlc-loyalty-progress__points-start:after, .wlc-loyalty-progress--theme-default:host .wlc-loyalty-progress__points-end:after {\n  content: "-";\n  display: inline-block;\n  width: 0;\n  opacity: 0;\n  overflow: hidden;\n  pointer-events: none;\n}\n.wlc-loyalty-progress--theme-default:host .wlc-loyalty-progress__title, .wlc-loyalty-progress--theme-default:host .wlc-loyalty-progress__points {\n  line-height: 1;\n}']})],he);const pe={class:"wlc-new-password-form"},ue={class:"wlc-form-wrapper",components:[{name:"core.wlc-input",params:{theme:"vertical",common:{placeholder:gettext("New password"),type:"password",customModifiers:"right-shift",usePasswordVisibilityBtn:!0},wlcElement:"block_password-new",name:"newPassword",validators:["required","password",{name:"minLength",options:6},{name:"maxLength",options:50}]}},{name:"core.wlc-input",params:{theme:"vertical",common:{placeholder:gettext("Confirm password"),type:"password",customModifiers:"right-shift",usePasswordVisibilityBtn:!0},wlcElement:"block_password-confirm",name:"repeatPassword",validators:["required",{name:"minLength",options:6},{name:"maxLength",options:50}]}},{name:"core.wlc-button",params:{common:{text:gettext("Save"),type:"submit",customModifiers:"centered"},wlcElement:"button_submit"}}],validators:[{name:"matchingFields",options:["newPassword","repeatPassword"]}]};let ge=class extends O.k{constructor(e,t,n,i,s){super({injectParams:e,defaultParams:pe}),this.injectParams=e,this.stateService=t,this.userService=n,this.modalService=i,this.eventService=s,this.config=ue}ngSubmit(e){return(0,i.__awaiter)(this,void 0,void 0,function*(){const{newPassword:t,repeatPassword:n}=e.value,i=this.injectParams.common.code;try{e.disable(),yield this.userService.restoreNewPassword(t,n,i),this.stateService.go("app.home"),this.eventService.emit({name:"LOGIN"}),this.eventService.emit({name:x.LA.PushMessage,data:{type:"success",title:gettext("Password reset"),message:gettext("Password has been changed!"),wlcElement:"notification_password-change-success"}}),this.modalService.getActiveModal("new-password")&&this.modalService.hideModal("new-password")}catch(s){this.eventService.emit({name:x.LA.PushMessage,data:{type:"error",title:gettext("Password reset failed"),message:s.errors,wlcElement:"notification_password-change-error"}})}finally{e.enable()}})}};ge.ctorParameters=()=>[{type:void 0,decorators:[{type:s.tBr,args:["injectParams"]}]},{type:k.StateService},{type:d.K},{type:v.Z},{type:f.P}],ge.propDecorators={inlineParams:[{type:s.IIB}]},ge=(0,i.__decorate)([(0,s.wA2)({selector:"[wlc-new-password-form]",template:'<div wlc-form-wrapper [config]="config" [ngSubmit]="ngSubmit.bind(this)"></div>\n',styles:[".wlc-new-password-form--theme-default:host {\n  max-width: 285px;\n  margin: auto;\n}\n.wlc-new-password-form--theme-default:host::ng-deep .wlc-input {\n  margin: 0 0 20px;\n}\n.wlc-new-password-form--theme-default:host::ng-deep .wlc-input:last-child {\n  margin-bottom: 0;\n}\n.wlc-new-password-form--theme-default:host::ng-deep .wlc-input .wlc-input__container .wlc-input__input:disabled {\n  color: var(--fc-textColor);\n  -webkit-text-fill-color: var(--fc-textColor);\n  background: var(--fc-inputBg);\n  opacity: 1;\n}\n.wlc-new-password-form--theme-default:host::ng-deep .wlc-btn {\n  margin: 40px auto 0;\n}"]})],ge);var we=n(87519),fe=n(40262),ve=n(78342);let xe={class:"wlc-phone-field",phoneCode:{labelText:gettext("Phone"),wlcElement:"block_phoneCode",common:{placeholder:gettext("Code")},locked:!0,name:"phoneCode",validators:["required"],options:"phoneCodes"},phoneNumber:{common:{placeholder:gettext("Phone number"),type:"text"},wlcElement:"block_phoneNumber",name:"phoneNumber",locked:!0,validators:["required"],maskOptions:{mask:new RegExp(/^\d{0,13}$/)}}};var ye=n(56766),be=n(7329);let _e=class extends O.k{constructor(e,t,n,i,s,o,a){super({injectParams:e,defaultParams:xe}),this.injectParams=e,this.configService=t,this.selectValues=n,this.cdr=i,this.userService=s,this.validationService=o,this.modalService=a,this.useVerificationBtn=!1}ngOnInit(){var e,t,n,i;super.ngOnInit(this.inlineParams),this.provideParams(),this.profileType=this.configService.get("$base.profile.type"),this.smsVerification=this.configService.get("$base.profile.smsVerification.use");const s=this.configService.get("phoneCode"),o=this.configService.get("phoneNumber");this.userService.userProfile$.pipe((0,j.R)(this.$destroy)).pipe((0,g.h)(e=>!!e)).subscribe(e=>{this.$params.showVerification&&this.smsVerification&&(this.useVerificationBtn=!e.phoneVerified,this.useVerificationBtn?(this.setModifiers("sms-not-verified"),this.removeModifiers("sms-verified")):(this.setModifiers("sms-verified"),this.removeModifiers("sms-not-verified"))),e.phoneCode||s?(this.$params.phoneCode.control.setValue(e.phoneCode||s),this.$params.phoneCode.control.updateValueAndValidity({onlySelf:!0})):this.$params.phoneCode.control.value||this.configService.get("countries").pipe((0,z.P)(e=>!!e.length)).subscribe(t=>{const n=(null==e?void 0:e.countryCode)||this.configService.get("appConfig.country"),i=(0,ye.Z)(t,e=>n===(null==e?void 0:e.value));i&&(this.$params.phoneCode.control.setValue("+"+ +i.phoneCode),this.$params.phoneCode.control.updateValueAndValidity({onlySelf:!0}),setTimeout(()=>{this.setValidators("+"+ +i.phoneCode),this.cdr.detectChanges()}))}),this.$params.phoneNumber.control.setValue(e.phoneNumber||o),this.$params.phoneNumber.control.updateValueAndValidity({onlySelf:!0})}),null===(t=null===(e=this.$params.phoneCode)||void 0===e?void 0:e.control)||void 0===t||t.valueChanges.pipe((0,j.R)(this.$destroy)).subscribe(e=>{e&&(this.setValidators(e),this.configService.set({name:"phoneCode",value:e}))}),null===(i=null===(n=this.$params.phoneNumber)||void 0===n?void 0:n.control)||void 0===i||i.valueChanges.pipe((0,j.R)(this.$destroy),(0,we.x)()).subscribe(e=>{this.configService.set({name:"phoneNumber",value:e}),this.$params.phoneNumber.control.updateValueAndValidity({onlySelf:!0})})}openSmsModal(){this.modalService.showModal({id:"sms-verification",componentName:"user.wlc-sms-verification",componentParams:{functional:"profile"},modalTitle:gettext("Verify your account"),showFooter:!1})}setValidators(e){const t=this.selectValues.getPhoneLimitsDefault()[e],n=(null==t?void 0:t.minLength)||6,i=(null==t?void 0:t.maxLength)||13;this.$params.phoneNumber.maskOptions={mask:new RegExp(`^\\d{0,${i}}$`)},this.$params.phoneNumber.control.clearValidators(),this.$params.phoneNumber.control.setValidators([this.validationService.getValidator("minLength").validator(n),this.validationService.getValidator("required").validator]),this.$params.phoneNumber.control.updateValueAndValidity({onlySelf:!0}),this.$params.phoneCode=(0,be.Z)(this.$params.phoneCode),this.$params.phoneNumber=(0,be.Z)(this.$params.phoneNumber),this.cdr.detectChanges()}provideParams(){this.$params.phoneCode.theme=this.$params.theme,this.$params.phoneNumber.theme=this.$params.theme}};_e.ctorParameters=()=>[{type:void 0,decorators:[{type:s.tBr,args:["injectParams"]}]},{type:w.E4},{type:fe.l},{type:s.sBO},{type:d.K},{type:ve.R},{type:v.Z}],_e.propDecorators={inlineParams:[{type:s.IIB}]},_e=(0,i.__decorate)([(0,s.wA2)({selector:"[wlc-phone-field]",template:'<div wlc-select [inlineParams]="$params.phoneCode"></div>\n<div wlc-input [inlineParams]="$params.phoneNumber"></div>\n<button *ngIf="useVerificationBtn"\n        wlc-button\n        typeAttr="button"\n        text="Verify"\n        theme="resolve"\n        (click)="openSmsModal()">\n</button>\n',styles:[".wlc-phone-field--theme-default:host {\n  display: grid;\n  grid-gap: 10px;\n  grid-template-columns: minmax(0, 1fr);\n  align-items: flex-end;\n}\n\n.wlc-phone-field--theme-vertical:host {\n  display: grid;\n  grid-gap: 10px;\n  grid-template-columns: 1fr 2fr;\n  align-items: flex-end;\n  margin: 0 0 15px 0;\n  padding: 0 10px;\n}\n\n.wlc-phone-field--theme-vertical:host ::ng-deep .wlc-input[class] .wlc-input__label {\n  display: none;\n}"]})],_e);var ke=n(3679),Se=n(88644);const Pe={class:"wlc-profile-form",componentName:"wlc-profile-form",moduleName:"user",common:{},config:{class:"wlc-form-wrapper",components:[{name:"core.wlc-input",params:{common:{placeholder:gettext("E-mail")},wlcElement:"block_email",locked:!0,name:"email",validators:["required","email"],exampleValue:"example@mail.com"}},{name:"core.wlc-input",params:{common:{placeholder:gettext("First name")},wlcElement:"block_Name",name:"firstName",locked:!0,prohibitedPattern:/[\d!"#$%&'()*+,.\/:;<=>?@[\\\]^_`{|}~\xa1\xbf\xf7\u02c6\u2116]/g,validators:["required","allowLettersOnly"],exampleValue:gettext("Enter your name")}},{name:"core.wlc-input",params:{common:{placeholder:gettext("Last name")},wlcElement:"block_last-name",name:"lastName",locked:!0,prohibitedPattern:/[\d!"#$%&'()*+,.\/:;<=>?@[\\\]^_`{|}~\xa1\xbf\xf7\u02c6\u2116]/g,validators:["required","allowLettersOnly"],exampleValue:gettext("Enter your last name")}},{name:"core.wlc-select",params:{labelText:gettext("Sex"),wlcElement:"block_gender",common:{placeholder:gettext("Sex")},locked:!0,name:"gender",validators:["required"],options:"genders"}},{name:"core.wlc-birth-field",params:{name:["birthDay","birthMonth","birthYear"],validators:["required"],locked:!0}},{name:"core.wlc-select",params:{labelText:gettext("Country"),wlcElement:"block_country",common:{placeholder:gettext("Country")},locked:!0,name:"countryCode",validators:["required"],options:"countries",useSearch:!0,insensitiveSearch:!0,noResultText:gettext("No results available")}},{name:"core.wlc-input",params:{common:{placeholder:gettext("City")},wlcElement:"block_city",name:"city",validators:[],maskOptions:"textField"}},{name:"core.wlc-input",params:{common:{placeholder:gettext("Address")},wlcElement:"block_address",name:"address",validators:[]}},{name:"core.wlc-input",params:{common:{placeholder:gettext("Postal code")},wlcElement:"block_postalcode",name:"postalCode",validators:[]}},{name:"core.wlc-select",params:{labelText:gettext("PEP"),wlcElement:"block_pep",common:{placeholder:gettext("PEP"),tooltipText:gettext("Politically Exposed Person")},locked:!0,name:"pep",validators:[],options:"pep"}},{name:"user.wlc-phone-field",params:{name:["phoneCode","phoneNumber"],locked:!0,showVerification:!0,phoneCode:{common:{tooltipIcon:"verified-icon",tooltipMod:"resolve",tooltipText:gettext("The phone has been successfully verified")}}}},{name:"core.wlc-input",params:{common:{placeholder:gettext("Password"),wlcElement:"block_password",type:"password",customModifiers:"right-shift",usePasswordVisibilityBtn:!0},name:"currentPassword",validators:["required"]}},{name:"core.wlc-button",params:{name:"submit",wlcElement:"button_submit",common:{text:gettext("Save changes")}}}]},additionalBlocks:{subscriptions:{title:gettext("Subscriptions"),use:!0},security:{title:gettext("Security"),use:!0},banking:{title:gettext("Banking information"),use:!0}}};var Ce=n(56298),Ee=n(692);let $e=class extends l.k8{constructor(e,t,n,i,s,o){super({injectParams:e,defaultParams:Pe},o),this.params=e,this.userService=t,this.cdr=n,this.modalService=i,this.eventService=s,this.configService=o,this.userProfile=this.userService.userProfile$,this.toggleBtn={name:"notification",type:"toggle",control:new ke.NI,onChange:e=>{this.notificationToggle(e)}},this.errors$=new I.X(null)}ngOnInit(){const e=Object.create(null,{ngOnInit:{get:()=>super.ngOnInit}});return(0,i.__awaiter)(this,void 0,void 0,function*(){e.ngOnInit.call(this,this.inlineParams),yield this.configService.ready,this.toggleBtn.control.valueChanges.pipe((0,j.R)(this.$destroy)).subscribe(()=>{this.userToggleChoice=this.toggleBtn.control.value}),yield this.userService.fetchUserProfile(),this.userProfile.pipe((0,j.R)(this.$destroy)).subscribe(e=>{e&&(this.toggleBtn.control.untouched?this.toggleBtn.control.setValue(e.emailAgree):this.toggleBtn.control.setValue(this.userToggleChoice),this.cdr.detectChanges())})})}ngSubmit(e){return(0,i.__awaiter)(this,void 0,void 0,function*(){const{pep:t}=e.value;delete e.value.pep,t&&(e.value.extProfile=(0,Ce.Z)({},e.value.extProfile,{pep:t}));const n=yield this.userService.updateProfile(e.value,!1);return!0===n?(this.eventService.emit({name:l.LA.PushMessage,data:{type:"success",title:gettext("Profile updated successfully"),message:gettext("Your profile has been updated successfully"),wlcElement:"notification_profile-update-success"}}),this.cdr.detectChanges(),!0):(this.eventService.emit({name:l.LA.PushMessage,data:{type:"error",title:gettext("Profile update failed"),message:n.errors,wlcElement:"notification_profile-update-error"}}),(0,Ee.Z)(n.errors)&&this.errors$.next(n.errors),!1)})}changePasswordModal(){this.modalService.showModal("changePassword")}addBankingInformation(){this.modalService.showModal({id:"add-profile-info",modifier:"add-profile-info",componentName:"user.wlc-add-profile-info",componentParams:{title:gettext("Banking information"),formConfig:{class:"wlc-form-wrapper",components:[this.changeValidators(Se.D.bankNameText,[]),this.changeValidators(Se.D.branchCode,[]),this.changeValidators(Se.D.swift,[]),this.changeValidators(Se.D.ibanNumber,[]),Se.D.password,Se.D.submit]},formData:this.userProfile},showFooter:!1,dismissAll:!0,backdrop:"static"})}notificationToggle(e){return(0,i.__awaiter)(this,void 0,void 0,function*(){try{const t={extProfile:{dontSendEmail:!e,sendEmail:e},emailAgree:e};yield this.userService.updateProfile(t,!0)}catch(t){}})}changeValidators(e,t){return e.params.validators=t,e}};$e.ctorParameters=()=>[{type:void 0,decorators:[{type:s.tBr,args:["injectParams"]}]},{type:d.K},{type:s.sBO},{type:l.Z7},{type:l.PO},{type:l.E4}],$e.propDecorators={inlineParams:[{type:s.IIB}]},$e=(0,i.__decorate)([(0,s.wA2)({selector:"[wlc-profile-form]",template:'<div class="{{$class}}__form"\n     wlc-form-wrapper\n     [config]="$params.config"\n     [formData]="userProfile"\n     [ngSubmit]="ngSubmit.bind(this)"\n     [errors]="errors$.asObservable()"\n></div>\n\n<div class="{{$class}}__add" *ngIf="$params.additionalBlocks">\n    <div class="{{$class}}__block {{$class}}__block-notification">\n        <div\n            class="{{$class}}__title"\n            wlc-title [mainText]="$params.additionalBlocks.subscriptions.title"\n            [mainTag]="\'span\'"\n        ></div>\n        <div class="{{$class}}__item" data-wlc-element="block_subscriptions">\n            <div class="{{$class}}__item-title">\n                <div class="{{$class}}__item-title-main">{{\'Notifications via e-mail\' | translate}}</div>\n            </div>\n            <div class="{{$class}}__item-switcher">\n                <div wlc-checkbox [inlineParams]="toggleBtn"></div>\n            </div>\n        </div>\n    </div>\n\n    <div class="{{$class}}__block" *ngIf="$params.additionalBlocks">\n        <div\n            class="{{$class}}__title"\n            wlc-title [mainText]="$params.additionalBlocks.security.title"\n            [mainTag]="\'span\'"\n        ></div>\n        <div class="{{$class}}__item" data-wlc-element="block_edit-password">\n            <div class="{{$class}}__item-title">\n                <div class="{{$class}}__item-title-main">\n                    {{\'Password\' | translate}}\n                </div>\n                <div class="{{$class}}__item-title-description">\n                    {{\'You can change your password here.\' | translate}}\n                </div>\n            </div>\n            <button wlc-button\n                    text="Change"\n                    wlcElement="button_change-password"\n                    iconPath="/wlc/icons/arrow.svg"\n                    (click)="changePasswordModal()">\n            </button>\n        </div>\n    </div>\n\n    <div *ngIf="$params.additionalBlocks?.banking.use" class="{{$class}}__block">\n        <div class="{{$class}}__item" data-wlc-element="block_banking-info">\n            <div class="{{$class}}__item-title">\n                <div class="{{$class}}__item-title-main">\n                    {{$params.additionalBlocks.banking.title | translate}}\n                </div>\n                <div class="{{$class}}__item-title-description">\n                    {{\'You can add your banking information here.\' | translate}}\n                </div>\n            </div>\n            <button wlc-button\n                    text="Add info"\n                    wlcElement="button_add-banking-info"\n                    iconPath="/wlc/icons/arrow.svg"\n                    (click)="addBankingInformation()">\n            </button>\n        </div>\n    </div>\n</div>\n',styles:[""]})],$e);const Me={class:"wlc-reality-check-info"};let Te=class extends O.k{constructor(e,t,n){super({injectParams:e,defaultParams:Me}),this.params=e,this.userService=t,this.modalService=n,this.showClose=!1,this.checkBoxParams={name:"i-have-seen",text:gettext("I have seen this message"),textSide:"right",control:new ke.NI,onChange:e=>{this.showClose=e}}}ngOnInit(){const e=Object.create(null,{ngOnInit:{get:()=>super.ngOnInit}});return(0,i.__awaiter)(this,void 0,void 0,function*(){e.ngOnInit.call(this,this.inlineParams),this.playTime=u.ou.fromJSDate(new Date(this.$params.FromTime+" UTC")).toFormat("yyyy-LL-dd HH:mm:ss")})}close(){this.modalService.hideModal("reality-check-info")}logout(){try{this.userService.logout()}catch(e){}}};Te.ctorParameters=()=>[{type:void 0,decorators:[{type:s.tBr,args:["injectParams"]}]},{type:d.K},{type:v.Z}],Te.propDecorators={inlineParams:[{type:s.IIB}]},Te=(0,i.__decorate)([(0,s.wA2)({selector:"[wlc-reality-check-info]",template:'<div class="{{$class}}-title">{{\'A kind reminder\' | translate}}</div>\n<div class="{{$class}}-time">\n    <div wlc-timer\n        [value]="playTime"\n        [text]="\'Play time\' | translate"\n        [countUp]="true"\n        [noDays]="true"\n        [themeMod]="\'play-time\'">\n    </div>\n</div>\n\n<div class="{{$class}}-result">\n    <div class="{{$class}}-result-head">\n        <div class="{{$class}}-result-item">{{\'Wins\' | translate}}</div>\n        <div class="{{$class}}-result-item">{{\'Losses\' | translate}}</div>\n        <div class="{{$class}}-result-item">{{\'Deposits\' | translate}}</div>\n    </div>\n    <div class="{{$class}}-result-value">\n        <div class="{{$class}}-result-item">\n            <span wlc-currency [value]="$params.Wins"></span>\n        </div>\n        <div class="{{$class}}-result-item">\n            <span wlc-currency [value]="$params.Losses"></span>\n        </div>\n        <div class="{{$class}}-result-item">\n            <span wlc-currency [value]="$params.Deposits"></span>\n        </div>\n    </div>\n</div>\n\n<div class="{{$class}}-footer">\n    <div wlc-checkbox [inlineParams]="checkBoxParams"></div>\n\n    <div *ngIf="showClose; else logoutTemplate">\n        <button wlc-button\n            text="Close"\n            (click)="close()"\n            themeMod="secondary">\n        </button>\n    </div>\n</div>\n\n<ng-template #logoutTemplate>\n    <button wlc-button\n        text="Logout"\n        (click)="logout()"\n        themeMod="secondary">\n    </button>\n</ng-template>\n',styles:[".wlc-reality-check-info--theme-default:host {\n  padding: 0 38px 38px 38px;\n}\n.wlc-reality-check-info--theme-default:host .wlc-reality-check-info-title {\n  margin: 0 0 40px 0;\n  text-align: center;\n}\n.wlc-reality-check-info--theme-default:host .wlc-reality-check-info-time {\n  margin: 0 0 10px 0;\n}\n.wlc-reality-check-info--theme-default:host .wlc-reality-check-info-result {\n  margin: 0 0 40px 0;\n}\n.wlc-reality-check-info--theme-default:host .wlc-reality-check-info-result-head, .wlc-reality-check-info--theme-default:host .wlc-reality-check-info-result-value {\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n}\n.wlc-reality-check-info--theme-default:host .wlc-reality-check-info-result-head {\n  padding: 10px;\n}\n.wlc-reality-check-info--theme-default:host .wlc-reality-check-info-result-value {\n  border-radius: 10px;\n  padding: 5px;\n  background: var(--mc-bg500);\n}\n.wlc-reality-check-info--theme-default:host .wlc-reality-check-info-result-item {\n  text-align: center;\n}\n.wlc-reality-check-info--theme-default:host .wlc-reality-check-info-footer {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n}\n.wlc-reality-check-info--theme-default:host .wlc-reality-check-info-footer .wlc-checkbox {\n  margin: 0 0 40px 0;\n}"]})],Te);const Ie={class:"wlc-restore-link"};let De=class extends O.k{constructor(e,t){super({injectParams:e,defaultParams:Ie}),this.injectParams=e,this.modalService=t}showModal(){this.modalService.showModal("restorePassword")}};De.ctorParameters=()=>[{type:void 0,decorators:[{type:s.tBr,args:["injectParams"]}]},{type:V.Z7}],De=(0,i.__decorate)([(0,s.wA2)({selector:"[wlc-restore-link]",template:'<button\n    wlc-button\n    class="{{$class}}__content"\n    [attr.type]="\'button\'"\n    theme="cleared"\n    text="Forgot your password?"\n    (click)="showModal()">\n</button>\n',styles:[".wlc-restore-link:host {\n  line-height: 1;\n  text-align: right;\n}\n.wlc-restore-link:host .wlc-btn {\n  color: var(--mc-main);\n  font-style: normal;\n  font-weight: normal;\n  font-size: 1.4rem;\n  line-height: 1.45;\n  transition: color 0.3s linear;\n  text-decoration: underline;\n}\n@media (pointer: fine) {\n  .wlc-restore-link:host .wlc-btn:hover {\n    color: var(--mc-baseMain);\n  }\n}"]})],De);var Le=n(80675);const Be={class:"wlc-restore-password-form"},Oe={class:"wlc-form-wrapper",components:[{name:"core.wlc-text-block",params:{common:{textBlockSubtitle:[gettext("Please enter e-mail that was used to create an account at"),Le.B.site.url||Le.B.site.name+". ",gettext("A password reset link will be sent to your e-mail address shortly.")]}}},{name:"core.wlc-input",params:{theme:"vertical",common:{placeholder:gettext("E-mail"),type:"email"},name:"email",validators:["required","email"],wlcElement:"input_restore-userlogin"}},{name:"core.wlc-button",params:{common:{text:gettext("Restore"),type:"submit",customModifiers:"centered restore"},wlcElement:"button_restore"}},{name:"core.wlc-link-block",params:{common:{subtitle:gettext("Don't have an account?"),link:gettext("Sign up now"),actionParams:{modal:{name:"signup"}}},wlcElement:"register_block"}}]};let Ae=class extends O.k{constructor(e,t,n,i,s){super({injectParams:e,defaultParams:Be}),this.injectParams=e,this.eventService=t,this.modalService=n,this.userService=i,this.configService=s,this.config=Oe}ngSubmit(e){return(0,i.__awaiter)(this,void 0,void 0,function*(){const{email:t}=e.value;try{if(e.disable(),yield this.doesEmailExist(t))return void setTimeout(()=>e.controls.email.setErrors({"email-not-exist":!0}));yield this.userService.sendPasswordRestore(t),this.modalService.hideModal("restore-password"),this.eventService.emit({name:x.LA.PushMessage,data:{type:"success",title:gettext("Password reset success"),message:this.configService.get("appConfig.hideEmailExistence")?gettext("Recovery link has been sent to the entered e-mail address. If you didn\u2019t receive it, please make sure you\u2019ve used correct email address, or check your spam/junk folder."):gettext("A password reset link will be sent to your e-mail address shortly."),wlcElement:"notification_password-reset-success"}})}catch(n){this.eventService.emit({name:x.LA.PushMessage,data:{type:"error",title:gettext("Password reset failed"),message:n.errors,wlcElement:"notification_password-reset-error"}})}finally{e.enable()}})}doesEmailExist(e){return(0,i.__awaiter)(this,void 0,void 0,function*(){if(this.configService.get("appConfig.hideEmailExistence"))return!1;const t=yield this.userService.emailUnique(e);return t.data.result&&this.eventService.emit({name:x.LA.PushMessage,data:{type:"error",title:gettext("Error"),message:gettext("Account with this e-mail isn't exist")}}),t.data.result})}};Ae.ctorParameters=()=>[{type:void 0,decorators:[{type:s.tBr,args:["injectParams"]}]},{type:f.P},{type:v.Z},{type:d.K},{type:w.E4}],Ae=(0,i.__decorate)([(0,s.wA2)({selector:"[wlc-restore-password-form]",template:'<div wlc-form-wrapper [config]="config" [ngSubmit]="ngSubmit.bind(this)"></div>\n',styles:[".wlc-restore-password-form--theme-default:host {\n  max-width: 100%;\n  margin: auto;\n}\n@media (min-width: 768px) {\n  .wlc-restore-password-form--theme-default:host {\n    max-width: 285px;\n  }\n}\n.wlc-restore-password-form--theme-default:host::ng-deep .wlc-form {\n  display: flex;\n  flex-direction: column;\n}\n.wlc-restore-password-form--theme-default:host::ng-deep .wlc-text-block__head {\n  margin: 0 0 30px 0;\n}\n@media (min-width: 560px) {\n  .wlc-restore-password-form--theme-default:host::ng-deep .wlc-text-block__head {\n    margin: 0 0 40px 0;\n  }\n}\n.wlc-restore-password-form--theme-default:host::ng-deep .wlc-text-block__subtitle {\n  margin-left: auto;\n  margin-right: auto;\n}\n@media (min-width: 480px) {\n  .wlc-restore-password-form--theme-default:host::ng-deep .wlc-text-block__subtitle {\n    margin-left: -45px;\n  }\n}\n@media (min-width: 480px) {\n  .wlc-restore-password-form--theme-default:host::ng-deep .wlc-text-block__subtitle {\n    margin-right: -45px;\n  }\n}\n.wlc-restore-password-form--theme-default:host::ng-deep .wlc-input {\n  margin: 0 0 20px;\n}\n.wlc-restore-password-form--theme-default:host::ng-deep .wlc-input:last-child {\n  margin-bottom: 0;\n}\n.wlc-restore-password-form--theme-default:host::ng-deep .wlc-input ::ng-deep .wlc-input__container .wlc-input__input:disabled {\n  color: var(--fc-textColor);\n  -webkit-text-fill-color: var(--fc-textColor);\n  background: var(--fc-inputBg);\n  opacity: 1;\n}\n.wlc-restore-password-form--theme-default:host::ng-deep .wlc-btn--restore {\n  margin: 30px auto 40px;\n}\n@media (min-width: 560px) {\n  .wlc-restore-password-form--theme-default:host::ng-deep .wlc-btn--restore {\n    margin: 20px auto 40px;\n  }\n}"]})],Ae);const Ne={class:"wlc-sign-in-form",moduleName:"user",componentName:"wlc-sign-in-form",wlcElement:"modal_login"},je={class:"wlc-form-wrapper",components:[{name:"core.wlc-text-block",params:{common:{textBlockTitle:gettext("Login"),textBlockSubtitle:gettext("Welcome back!")}}},{name:"core.wlc-input",params:{theme:"vertical",wlcElement:"block_email-login",common:{placeholder:gettext("E-mail"),type:"email"},name:"email",validators:["required","email"]}},{name:"core.wlc-input",params:{theme:"vertical",wlcElement:"block_password",common:{placeholder:gettext("Password"),type:"password",customModifiers:"right-shift",usePasswordVisibilityBtn:!0,fixAutoCompleteForm:!1},name:"password",validators:["required"]}},{name:"user.wlc-restore-link",params:{wlcElement:"button_forgot-password",common:{typeAttr:"button"}}},{name:"core.wlc-button",params:{wlcElement:"button_login-submit",common:{customModifiers:"submit",text:gettext("Login"),typeAttr:"submit"},themeMod:"secondary"}},{name:"core.wlc-link-block",params:{wlcElement:"button_register",common:{subtitle:gettext("Don't have an account?"),link:gettext("Sign up now"),actionParams:{modal:{name:"signup"}}}}}]};var Ue=n(20364);let Ve=class extends O.k{constructor(e,t,n,i,s,o){super({injectParams:e,defaultParams:Ne},i),this.injectParams=e,this.eventService=t,this.logService=n,this.configService=i,this.modalService=s,this.userService=o,this.errors$=new I.X(null)}ngOnInit(){super.ngOnInit(),this.config=this.$params.formConfig||je,this.configService.get("$base.profile.socials.use")&&(this.addModifiers("socials"),(0,Ue.Z)(this.config.components,e=>"user.wlc-social-networks"===e.name)||this.config.components.unshift({name:"user.wlc-social-networks",params:{}}))}ngSubmit(e){return(0,i.__awaiter)(this,void 0,void 0,function*(){const{email:t,login:n,password:i}=e.value,s=t||n;try{e.disable(),yield this.userService.login(s,i),this.modalService.hideModal("login")}catch(o){this.eventService.emit({name:l.LA.PushMessage,data:{type:"error",title:gettext("Login error"),message:o.errors,wlcElement:"notification_login-error"}}),(0,Ee.Z)(o.errors)&&this.errors$.next(o.errors)}finally{e.enable()}})}};Ve.ctorParameters=()=>[{type:void 0,decorators:[{type:s.tBr,args:["injectParams"]}]},{type:V.PO},{type:V.$V},{type:l.E4},{type:V.Z7},{type:d.K}],Ve=(0,i.__decorate)([(0,s.wA2)({selector:"[wlc-sign-in-form]",template:'<div *ngIf="$params.wrapperConfig" wlc-wrapper [inlineParams]="$params.wrapperConfig"></div>\n<div wlc-form-wrapper\n    [config]="config"\n    [ngSubmit]="ngSubmit.bind(this)"\n    [errors]="errors$.asObservable()"\n></div>\n',styles:[".wlc-sign-in-form--theme-default:host {\n  max-width: 100%;\n  height: 100%;\n  margin: auto;\n}\n@media (min-width: 768px) {\n  .wlc-sign-in-form--theme-default:host {\n    max-width: 285px;\n  }\n}\n.wlc-sign-in-form--theme-default:host::ng-deep .wlc-form-wrapper,\n.wlc-sign-in-form--theme-default:host::ng-deep .wlc-form {\n  height: 100%;\n}\n.wlc-sign-in-form--theme-default:host::ng-deep .wlc-form {\n  display: flex;\n  flex-direction: column;\n}\n.wlc-sign-in-form--theme-default:host::ng-deep .wlc-restore-link {\n  margin: 0 0 50px;\n  line-height: 0;\n}\n.wlc-sign-in-form--theme-default:host::ng-deep .wlc-restore-link:last-child {\n  margin-bottom: 0;\n}\n.wlc-sign-in-form--theme-default:host::ng-deep .wlc-input {\n  margin: 0 0 20px;\n}\n.wlc-sign-in-form--theme-default:host::ng-deep .wlc-input:last-child {\n  margin-bottom: 0;\n}\n.wlc-sign-in-form--theme-default:host::ng-deep .wlc-input ::ng-deep .wlc-input__container .wlc-input__input:disabled {\n  color: var(--fc-textColor);\n  -webkit-text-fill-color: var(--fc-textColor);\n  background: var(--fc-inputBg);\n  opacity: 1;\n}\n.wlc-sign-in-form--theme-default:host::ng-deep .wlc-btn--submit {\n  margin: auto auto 30px;\n}\n.wlc-sign-in-form--theme-default:host.wlc-sign-in-form--theme-mod-with-banner {\n  max-width: 100%;\n}\n.wlc-sign-in-form--theme-default:host.wlc-sign-in-form--theme-mod-with-banner ::ng-deep .banner {\n  padding: 0;\n  max-height: 200px;\n  min-height: unset;\n}\n.wlc-sign-in-form--theme-default:host.wlc-sign-in-form--theme-mod-with-banner ::ng-deep .banner img {\n  width: 100%;\n}\n.wlc-sign-in-form--theme-default:host.wlc-sign-in-form--theme-mod-with-banner .wlc-form-wrapper {\n  max-width: 285px;\n  margin: 20px auto auto;\n  height: 100%;\n}\n.wlc-sign-in-form--theme-default:host.wlc-sign-in-form--socials ::ng-deep .wlc-text-block {\n  order: -1;\n}\n.wlc-sign-in-form--theme-default:host.wlc-sign-in-form--socials ::ng-deep .wlc-social-networks {\n  margin: 0 0 20px;\n}"]})],Ve);var Re=n(6641);class Fe extends l.k8{constructor(e,t,n,i,s){super(e,t),this.componentParams=e,this.configService=t,this.userService=n,this.eventService=i,this.logService=s}finishUserReg(e){return(0,i.__awaiter)(this,void 0,void 0,function*(){this.userService.setProfileData(e),yield this.userService.createUserProfile(this.userService.userProfile.data),this.userService.finishRegistration()})}showRegError(e,t,n){this.eventService.emit({name:l.LA.PushMessage,data:{type:"error",title:n||gettext("Registration error"),message:e.errors,wlcElement:"notification_registration-error"}}),this.logService.sendLog({code:t||"2.1.0",data:e})}checkConfirmation(e){let{ageConfirmed:t,agreedWithTermsAndConditions:n}=e.value;return["birthYear","birthDay","birthMonth"].every(t=>t in e.value)&&(t=this.userService.checkUserAge(e.value)),!(!t||!n)||(this.eventService.emit({name:l.LA.PushMessage,data:{type:"error",title:gettext("Registration error"),message:gettext("You must agree with Terms and Conditions as well as confirm that you are at least 18 years old"),wlcElement:"notification_registration-terms-error"}}),!1)}formDataPreparation(e){e.controls.hasOwnProperty("passwordRepeat")||(e.value.passwordRepeat=e.value.password);const t={TYPE:"user-register",data:Object.assign({},e.value),fields:(0,Re.Z)(e.value)},n=this.configService.get(S.fs.ChosenBonus);return(null==n?void 0:n.id)&&(t.data.registrationBonus=n.id,t.fields.push("registrationBonus")),t}}const Ze={class:"wlc-sign-up-form",wlcElement:"modal_signup",componentName:"wlc-sign-up-form",moduleName:"user"},qe={class:"wlc-form-wrapper",components:[Se.D.email,Se.D.registrationPasswordNew,Se.D.currency,Se.D.promocode,Se.D.terms,Se.D.age,Se.D.signUp,{name:"core.wlc-link-block",params:{wlcElement:"button_login-modal",common:{subtitle:gettext("Already have an account?"),link:gettext("Login now"),actionParams:{modal:{name:"login"}}}}}]},Ge={components:[Se.D.lastName,Se.D.firstName,Se.D.country,Se.D.city,Se.D.address,Se.D.postalCode,Se.D.birthDate,Se.D.terms,Se.D.signUp,{name:"core.wlc-link-block",params:{wlcElement:"button_login-modal",common:{subtitle:gettext("Already have an account?"),link:gettext("Login now"),actionParams:{modal:{name:"login"}}}}}]};var Ke=n(54252),ze=n(12671),He=n(91074);let We=class extends Fe{constructor(e,t,n,i,s,o){super({injectParams:e,defaultParams:Ze},i,t,s,n),this.injectParams=e,this.userService=t,this.logService=n,this.configService=i,this.eventService=s,this.socialService=o,this.isMGALicense=!!this.configService.get('$modules.core.components["wlc-license"].mga'),this.errors$=new I.X(null),this.useMGAClass=this.isMGALicense}ngOnInit(){if(super.ngOnInit(),this.config=this.$params.formConfig||qe,this.config=(0,He.Z)(this.config),this.isMGALicense&&(this.isMGAFormStep()?this.config=Ge:this.config.components=(0,Ke.Z)(this.config.components,e=>!["ageConfirmed","agreedWithTermsAndConditions"].includes(e.params.name))),this.configService.get("$base.profile.smsVerification.use")||this.isMGALicense&&!this.isMGAFormStep()){const e=this.configService.get("regFormData");(0,L.Z)(this.config.components,t=>{var n,i,s;"core.wlc-button"===t.name&&(null===(i=null===(n=t.params)||void 0===n?void 0:n.common)||void 0===i?void 0:i.text)&&(t.params.common.text=gettext("Next")),(0,L.Z)(null===(s=null==e?void 0:e.form)||void 0===s?void 0:s.data,(e,n)=>{t.params.name===n&&(t.params.value=e)})})}this.configService.get("$base.profile.socials.use")&&(this.addModifiers("socials"),(0,Ue.Z)(this.config.components,e=>"user.wlc-social-networks"===e.name)||this.config.components.unshift({name:"user.wlc-social-networks",params:{}})),this.$params.formData&&(this.formData=new I.X(this.$params.formData))}ngSubmit(e){var t;return(0,i.__awaiter)(this,void 0,void 0,function*(){if(this.isMGALicense&&!this.isMGAFormStep()||this.configService.get("$base.profile.smsVerification.use"))this.nextStepSubmit(e);else try{if(e.disable(),!this.checkConfirmation(e))return;let n=this.formDataPreparation(e);this.isMGALicense&&this.isMGAFormStep()&&(n=(0,ze.Z)(null===(t=this.configService.get("regFormData"))||void 0===t?void 0:t.form,n)),yield this.userService.validateRegistration(n),yield this.finishUserReg(n.data)}catch(n){this.showRegError(n),(0,Ee.Z)(n.errors)&&this.errors$.next(n.errors)}finally{e.enable()}})}nextStepSubmit(e){var t;if((!this.isMGALicense||this.isMGAFormStep())&&!this.checkConfirmation(e))return;const n=(0,ze.Z)(this.formDataPreparation(e),null===(t=this.configService.get("regFormData"))||void 0===t?void 0:t.form);this.configService.set({name:"regFormData",value:{form:n}}),this.eventService.emit({name:l.Bm.Next})}isMGAFormStep(){return"mga"===this.$params.formType}};We.ctorParameters=()=>[{type:void 0,decorators:[{type:s.tBr,args:["injectParams"]}]},{type:d.K},{type:l.$V},{type:l.E4},{type:l.PO},{type:P}],We.propDecorators={useMGAClass:[{type:s.pfw,args:["class.mga-license"]}]},We=(0,i.__decorate)([(0,s.wA2)({selector:"[wlc-sign-up-form]",template:'<div wlc-form-wrapper\n    [config]="config"\n    [ngSubmit]="ngSubmit.bind(this)"\n    [formData]="formData"\n    [errors]="errors$.asObservable()">\n</div>\n',styles:[".wlc-sign-up-form--theme-default:host {\n  display: flex;\n  flex-direction: column;\n  max-width: 320px;\n  height: 100%;\n  margin: 0 auto;\n}\n.wlc-sign-up-form--theme-default:host::ng-deep .wlc-form-wrapper {\n  height: 100%;\n}\n.wlc-sign-up-form--theme-default:host::ng-deep .wlc-form {\n  display: grid;\n  grid-gap: 20px 15px;\n  grid-template-columns: 100px 1fr;\n  align-content: start;\n  height: 100%;\n}\n.wlc-sign-up-form--theme-default:host::ng-deep .wlc-form > .wlc-btn {\n  margin: 0 auto;\n}\n.wlc-sign-up-form--theme-default:host::ng-deep ::ng-deep .wlc-select .wlc-select__group .wlc-select__field:disabled {\n  color: var(--fc-textColor);\n  background: var(--fc-inputBg);\n}\n.wlc-sign-up-form--theme-default:host::ng-deep .wlc-input,\n.wlc-sign-up-form--theme-default:host::ng-deep .wlc-select,\n.wlc-sign-up-form--theme-default:host::ng-deep .wlc-checkbox,\n.wlc-sign-up-form--theme-default:host::ng-deep .wlc-btn,\n.wlc-sign-up-form--theme-default:host::ng-deep .wlc-birth-field,\n.wlc-sign-up-form--theme-default:host::ng-deep .wlc-link-block,\n.wlc-sign-up-form--theme-default:host::ng-deep .wlc-social-networks,\n.wlc-sign-up-form--theme-default:host::ng-deep .wlc-phone-field {\n  grid-column: span 2;\n}\n.wlc-sign-up-form--theme-default:host::ng-deep .wlc-input--promocode,\n.wlc-sign-up-form--theme-default:host::ng-deep .wlc-select--currency {\n  grid-column: span 1;\n}\n.wlc-sign-up-form--theme-default:host::ng-deep .wlc-checkbox--terms {\n  padding: 20px 10px 0 10px;\n}\n.wlc-sign-up-form--theme-default:host::ng-deep .wlc-checkbox--terms .wlc-checkbox__label {\n  position: relative;\n}\n.wlc-sign-up-form--theme-default:host::ng-deep .wlc-checkbox--age {\n  margin: -17px 0 0;\n  padding: 0 10px 20px 10px;\n}\n.wlc-sign-up-form--theme-default:host::ng-deep .wlc-checkbox--age .wlc-checkbox__label {\n  position: relative;\n}\n.wlc-sign-up-form--theme-default:host::ng-deep .wlc-select[wlc-select] .wlc-select__field,\n.wlc-sign-up-form--theme-default:host::ng-deep .wlc-select[wlc-select] .wlc-select__dropdown-item {\n  padding: 7px 35px 7px 13px;\n}\n.wlc-sign-up-form--theme-default:host::ng-deep .wlc-checkbox[wlc-checkbox] .wlc-checkbox__link {\n  color: var(--mc-main);\n  text-decoration: underline;\n  transition: color 0.3s linear, border-bottom-color 0.3s linear;\n}\n@media (pointer: fine) {\n  .wlc-sign-up-form--theme-default:host::ng-deep .wlc-checkbox[wlc-checkbox] .wlc-checkbox__link:hover {\n    color: var(--mc-baseMain);\n  }\n}\n.wlc-sign-up-form--theme-default:host::ng-deep .wlc-birth-field {\n  grid-template-columns: repeat(3, 1fr);\n}\n.wlc-sign-up-form--theme-default:host::ng-deep .wlc-birth-field .wlc-select {\n  grid-column: span 1;\n}\n.wlc-sign-up-form--theme-default:host::ng-deep .wlc-phone-field {\n  grid-template-columns: 100px 1fr;\n  grid-gap: 20px 15px;\n  gap: 20px 15px;\n  padding: 0;\n  margin: 0;\n}\n.wlc-sign-up-form--theme-default:host::ng-deep .wlc-phone-field .wlc-input,\n.wlc-sign-up-form--theme-default:host::ng-deep .wlc-phone-field .wlc-select {\n  grid-column: initial;\n}\n.wlc-sign-up-form--theme-default:host.mga-license ::ng-deep .wlc-form > .wlc-btn {\n  margin: 20px auto 0;\n}\n.wlc-sign-up-form--theme-default:host.mga-license ::ng-deep .wlc-form .wlc-checkbox {\n  padding: 0 10px;\n}"]})],We);var Ye=n(20945),Xe=n(26461),Je=n(41063);const Qe={class:"wlc-sms-verification",wlcElement:"modal_signup_sms_verification",componentName:"wlc-sms-verification",moduleName:"user",functional:"registration"},et={class:"wlc-form-wrapper",components:[{name:"user.wlc-phone-field",params:{name:["phoneCode","phoneNumber"],locked:!0,phoneCode:{labelText:gettext("Mobile code"),wlcElement:"block_phoneCode",common:{placeholder:gettext("Mobile code")},locked:!0,name:"phoneCode",validators:["required"],options:"phoneCodes"},phoneNumber:{common:{separateLabel:gettext("Mobile phone"),placeholder:gettext("Enter phone number"),type:"text"},wlcElement:"block_phoneNumber",name:"phoneNumber",locked:!0,validators:["required"],maskOptions:{mask:new RegExp(/^\d{0,13}$/)}}}},{name:"core.wlc-button",params:{common:{text:gettext("Get code"),type:"submit",customModifiers:"centered"},wlcElement:"button_submit"}}]},tt={class:"wlc-form-wrapper",components:[{name:"core.wlc-input",params:{theme:"vertical",common:{separateLabel:gettext("Code"),placeholder:gettext("Enter code"),type:"number"},wlcElement:"block_sms-code",name:"code",locked:!0,validators:["required",{name:"minLength",options:4},{name:"maxLength",options:6}]}},{name:"core.wlc-button",params:{common:{text:gettext("Confirm"),type:"submit",customModifiers:"centered"},wlcElement:"button_submit"}}]};let nt=class extends Fe{constructor(e,t,n,i,s,o,a,r){super({injectParams:e,defaultParams:Qe},i,t,n,s),this.injectParams=e,this.userService=t,this.eventService=n,this.configService=i,this.logService=s,this.cdr=o,this.smsService=a,this.modalService=r,this.configCode=tt,this.codeSended=!1}ngOnInit(){super.ngOnInit(this.inlineParams),this.config=this.$params.formConfig||et,this.configCode=this.$params.codeConfig||tt}sendCode(e){return(0,i.__awaiter)(this,void 0,void 0,function*(){if(this.phoneCode=e.value.phoneCode,this.phoneNumber=e.value.phoneNumber,!this.phoneCode||!this.phoneNumber)return void e.markAllAsTouched();e.disable();const t=yield this.smsService.send(this.phoneCode,this.phoneNumber);(null==t?void 0:t.status)&&(yield this.senderActions(t,!1)),e.enable()})}submitCode(e){return(0,i.__awaiter)(this,void 0,void 0,function*(){const t=e.value.code;if(t)try{e.disable();const n=yield this.smsService.validate(this.smsToken,t,this.phoneCode,this.phoneNumber);if(null==n?void 0:n.status)if("profile"===this.$params.functional){(yield this.userService.updateProfile({phoneCode:this.phoneCode,phoneNumber:this.phoneNumber,phoneVerified:!0},!0))&&(this.eventService.emit({name:x.LA.PushMessage,data:{type:"success",title:gettext("Profile updated successfully"),message:gettext("Your profile has been updated successfully"),wlcElement:"notification_profile-update-success"}}),this.modalService.getActiveModal("sms-verification")&&this.modalService.hideModal("sms-verification"),this.cdr.detectChanges())}else yield this.userService.validateRegistration(this.formData),yield this.finishUserReg(this.formData.data);else setTimeout(()=>e.controls.code.setErrors({"wrong-sms-code":!0}))}catch(n){this.showRegError(n)}finally{e.enable()}else e.markAllAsTouched()})}resendCode(){return(0,i.__awaiter)(this,void 0,void 0,function*(){const e=yield this.smsService.send(this.phoneCode,this.phoneNumber);(null==e?void 0:e.status)&&(yield this.senderActions(e,!0)),(null==e?void 0:e.token)&&(this.smsToken=e.token,this.setResendTimeout())})}setResendTimeout(){this.lockResend=!0,this.timeValue=u.ou.now().plus({minutes:1}),this.timer&&(this.timer.value=this.timeValue,this.timer.ngOnInit()),this.cdr.detectChanges(),this.resendChecker=(0,Ye.F)(1e3).pipe((0,j.R)(this.$destroy)).subscribe(()=>{this.timeValue.toMillis()<=u.ou.local().toMillis()&&(this.resendChecker.unsubscribe(),this.lockResend=!1,this.cdr.markForCheck())})}createFormData(){const e=this.configService.get("regFormData");this.formData=e.form,this.formData.data.phoneCode=this.phoneCode,this.formData.data.phoneNumber=this.phoneNumber,this.formData.data.phoneVerified=!0,this.formData.fields.push("phoneCode"),this.formData.fields.push("phoneNumber")}showError(){this.eventService.emit({name:x.LA.PushMessage,data:{type:"error",title:gettext("SMS verification"),message:[gettext("Something went wrong. Please try again later.")],wlcElement:"sms-sended-error"}})}senderActions(e,t){return(0,i.__awaiter)(this,void 0,void 0,function*(){if(e.token){(yield this.smsService.checkState(e.token))?(this.smsToken=e.token,t||(this.codeSended=!0,"registration"===this.$params.functional&&this.createFormData()),this.setResendTimeout()):this.showError()}else this.showError()})}};nt.ctorParameters=()=>[{type:void 0,decorators:[{type:s.tBr,args:["injectParams"]}]},{type:d.K},{type:f.P},{type:w.E4},{type:Xe.$},{type:s.sBO},{type:p},{type:v.Z}],nt.propDecorators={inlineParams:[{type:s.IIB}],timer:[{type:s.i9L,args:[Je.K]}]},nt=(0,i.__decorate)([(0,s.wA2)({selector:"[wlc-sms-verification]",template:'<div *ngIf="!codeSended"\n    wlc-form-wrapper\n    [config]="config"\n    [ngSubmit]="sendCode.bind(this)"></div>\n<div *ngIf="codeSended" class="{{$class}}__code">\n    <div\n        wlc-form-wrapper\n        [config]="configCode"\n        [ngSubmit]="submitCode.bind(this)"></div>\n    <div class="{{$class}}__text">{{\'Didn\\\'t receive a code?\' | translate}}</div>\n    <button\n        wlc-button\n        class="{{$class}}__btn"\n        text="Sent again"\n        typeAttr="button"\n        [disabled]="lockResend"\n        (click)="resendCode()"\n        [wlcElement]="\'buttom_resend-sms\'"\n    ></button>\n    <div class="{{$class}}__timer">\n        <div class="{{$class}}__timer-text">{{\'Will be available in\' | translate}}</div>\n        <div wlc-timer\n            [value]="timeValue"\n            [noDays]="true"\n            [noHours]="true"\n            [themeMod]="\'light\'"></div>\n    </div>\n</div>\n',changeDetection:s.n4l.OnPush,styles:[".wlc-sms-verification--theme-default:host {\n  min-height: 400px;\n  width: 100%;\n  max-width: 290px;\n  margin: 0 auto;\n}\n@media (min-width: 1630px) {\n  .wlc-sms-verification--theme-default:host {\n    min-height: 470px;\n  }\n}\n.wlc-sms-verification--theme-default:host .wlc-sms-verification__text {\n  margin: 40px 0 0 0;\n  font-size: 1.4rem;\n  text-align: center;\n}\n.wlc-sms-verification--theme-default:host .wlc-sms-verification__timer {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  margin: 20px 0 0 0;\n}\n.wlc-sms-verification--theme-default:host .wlc-sms-verification__timer-text {\n  color: var(--mc-baseOpacity);\n  font-style: normal;\n  font-weight: normal;\n  font-size: 1rem;\n  line-height: 1.45;\n  margin: 0 0 5px 0;\n}\n.wlc-sms-verification--theme-default:host::ng-deep .wlc-input {\n  margin: 0 0 20px;\n}\n.wlc-sms-verification--theme-default:host::ng-deep .wlc-input:last-child {\n  margin: 0;\n}\n.wlc-sms-verification--theme-default:host::ng-deep .wlc-input .wlc-input__container .wlc-input__input:disabled {\n  color: var(--fc-textColor);\n  -webkit-text-fill-color: var(--fc-textColor);\n  background: var(--fc-inputBg);\n  opacity: 1;\n}\n.wlc-sms-verification--theme-default:host::ng-deep .wlc-phone-field {\n  grid-gap: 20px;\n}\n.wlc-sms-verification--theme-default:host::ng-deep .wlc-phone-field .wlc-select__label,\n.wlc-sms-verification--theme-default:host::ng-deep .wlc-phone-field .wlc-input__label {\n  margin: 0 0 0 10px;\n  font-size: 1rem;\n}\n.wlc-sms-verification--theme-default:host::ng-deep .wlc-btn {\n  margin: 40px auto 10px;\n}\n.wlc-sms-verification--theme-default:host::ng-deep .wlc-btn[disabled] {\n  cursor: not-allowed;\n  opacity: 0.5;\n}\n@media (pointer: fine) {\n  .wlc-sms-verification--theme-default:host::ng-deep .wlc-btn[disabled]:hover {\n    background: var(--mc-buttonColor);\n    box-shadow: none;\n    border: 2px solid transparent;\n  }\n}"]})],nt);var it=n(17238);const st={class:"wlc-user-info",moduleName:"user",componentName:"wlc-user-info",wlcElement:"block_user-stat",button:{use:!0,sref:"app.profile.cash.deposit",text:gettext("Deposit")},dropdown:{components:[{name:"core.wlc-wrapper",params:{class:"wlc-user-info__wrp",components:[{name:"user.wlc-user-name"},{name:"user.wlc-logout"}]}},{name:"user.wlc-user-stats"},{name:"menu.wlc-profile-menu",params:{theme:"dropdown",themeMod:"vertical",type:"dropdown",common:{useArrow:!0}}}]}};let ot=class extends O.k{constructor(e,t,n,i,s){super({injectParams:e,defaultParams:st},t),this.injectParams=e,this.configService=t,this.elementRef=n,this.stateService=i,this.eventService=s}ngOnInit(){super.ngOnInit(this.inlineParams),this.eventService.subscribe({name:"TRANSITION_ENTER"},()=>{this.isOpened=!1,this.dropdownBtnActive=!1},this.$destroy)}toggle(){this.isOpened=!this.isOpened,this.dropdownBtnActive=!this.dropdownBtnActive}depositAction(){this.stateService.go(this.$params.button.sref)}};ot.ctorParameters=()=>[{type:void 0,decorators:[{type:s.tBr,args:["injectParams"]}]},{type:V.E4},{type:s.SBq},{type:k.StateService},{type:V.PO}],ot.propDecorators={inlineParams:[{type:s.IIB}]},ot=(0,i.__decorate)([(0,s.wA2)({selector:"[wlc-user-info]",template:'<div class="{{$class}}__content">\n    <div class="{{$class}}-short"\n         wlc-user-stats\n         [type]="\'short\'">\n    </div>\n\n    <button\n        *ngIf="this.$params.button.use"\n        wlc-button\n        class="wlc-btn-deposit"\n        [wlcElement]="\'button_deposit\'"\n        [text]="this.$params.button.text"\n        (click)="depositAction()"\n    ></button>\n\n    <div class="{{$class}}-dropdown"\n         data-wlc-element="block_user-stat-dropdown"\n         wlc-click-outside\n         [isOpened]="isOpened"\n         (clickOutside)="this.isOpened = false; this.dropdownBtnActive = false;"\n    >\n        <div class="{{$class}}-dropdown__btn"\n             (click)="toggle()"\n             [ngClass]="{active: this.dropdownBtnActive}">\n            <span wlc-icon\n                  class="user"\n                  iconPath="/wlc/icons/user-icon.svg"\n                  wlcElement="icon_user">\n            </span>\n            <span wlc-icon\n                  class="arrow"                \n                  iconPath="/wlc/icons/arrow.svg"\n                  wlcElement="icon_arrow">\n            </span>\n        </div>\n\n        <div class="{{$class}}-dropdown__content"\n             wlc-wrapper [inlineParams]="$params.dropdown"\n             [@toggle]="isOpened ? \'opened\' : \'closed\'">\n        </div>\n    </div>\n</div>\n',changeDetection:s.n4l.OnPush,animations:[(0,it.X$)("toggle",[(0,it.SB)("opened",(0,it.oB)({opacity:1,visibility:"visible"})),(0,it.SB)("closed",(0,it.oB)({opacity:0,visibility:"hidden"})),(0,it.eR)("void => *",[(0,it.jt)(0)]),(0,it.eR)("* => *",[(0,it.jt)("0.3s")])])],styles:[".wlc-user-info--theme-default:host .wlc-user-info__content {\n  display: flex;\n  align-items: center;\n}\n.wlc-user-info--theme-default:host .wlc-user-info-short {\n  flex-shrink: 0;\n  margin: 0 20px;\n}\n.wlc-user-info--theme-default:host .wlc-user-info-dropdown {\n  position: relative;\n}\n.wlc-user-info--theme-default:host .wlc-user-info-dropdown__btn {\n  display: flex;\n  flex-shrink: 0;\n  align-items: center;\n  padding: 5px 12px 5px 5px;\n  border: 2px solid var(--mc-baseOpacity);\n  border-radius: 5px;\n  cursor: pointer;\n}\n.wlc-user-info--theme-default:host .wlc-user-info-dropdown__btn .user::ng-deep {\n  width: 25px;\n  height: 25px;\n}\n.wlc-user-info--theme-default:host .wlc-user-info-dropdown__btn .user::ng-deep svg {\n  display: block;\n  width: 100%;\n  height: 100%;\n}\n.wlc-user-info--theme-default:host .wlc-user-info-dropdown__btn .user::ng-deep circle {\n  fill: var(--mc-secondary);\n}\n.wlc-user-info--theme-default:host .wlc-user-info-dropdown__btn .user::ng-deep path {\n  fill: #fff;\n}\n.wlc-user-info--theme-default:host .wlc-user-info-dropdown__btn .arrow::ng-deep {\n  transition: transform 0.3s linear;\n  margin: 0 0 0 32px;\n}\n.wlc-user-info--theme-default:host .wlc-user-info-dropdown__btn .arrow::ng-deep svg {\n  fill: var(--fc-arrowColor);\n}\n.wlc-user-info--theme-default:host .wlc-user-info-dropdown__btn.active {\n  border: 2px solid var(--mc-main);\n}\n.wlc-user-info--theme-default:host .wlc-user-info-dropdown__btn.active .arrow::ng-deep {\n  transform: rotate(180deg);\n}\n.wlc-user-info--theme-default:host .wlc-user-info-dropdown__btn.active .arrow::ng-deep svg {\n  fill: var(--mc-baseMain);\n}\n@media (pointer: fine) {\n  .wlc-user-info--theme-default:host .wlc-user-info-dropdown__btn.active:hover {\n    transition: all 0.3s linear;\n    border: 2px solid var(--mc-main);\n  }\n  .wlc-user-info--theme-default:host .wlc-user-info-dropdown__btn.active:hover .arrow::ng-deep {\n    transform: rotate(180deg);\n  }\n  .wlc-user-info--theme-default:host .wlc-user-info-dropdown__btn.active:hover .arrow::ng-deep svg {\n    fill: var(--mc-baseMain);\n  }\n}\n@media (pointer: fine) {\n  .wlc-user-info--theme-default:host .wlc-user-info-dropdown__btn:hover {\n    transition: border-color 0.3s linear;\n    border: 2px solid var(--mc-bg100);\n  }\n  .wlc-user-info--theme-default:host .wlc-user-info-dropdown__btn:hover .arrow::ng-deep svg {\n    transition: fill 0.3s linear;\n    fill: var(--mc-bg100);\n  }\n}\n.wlc-user-info--theme-default:host .wlc-user-info-dropdown__content {\n  position: absolute;\n  top: calc(100% + 10px);\n  right: 0;\n  z-index: 10;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  width: 270px;\n  min-width: 270px;\n  padding: 10px;\n  background: var(--mc-bgModal);\n  box-shadow: 0 0 20px rgba(0, 0, 0, 0.3);\n  border-radius: 10px;\n}\n.wlc-user-info--theme-default:host .wlc-user-info-dropdown__content ::ng-deep .wlc-user-stats,\n.wlc-user-info--theme-default:host .wlc-user-info-dropdown__content ::ng-deep .wlc-user-name {\n  width: 100%;\n}\n.wlc-user-info--theme-default:host .wlc-btn-deposit {\n  padding: 5px;\n  margin: 0 15px 0 0;\n  min-width: auto;\n}\n@media (min-width: 1200px) {\n  .wlc-user-info--theme-default:host .wlc-btn-deposit {\n    padding: 5px 20px;\n  }\n}\n@media (min-width: 1200px) {\n  .wlc-user-info--theme-default:host .wlc-btn-deposit {\n    margin: 0 20px 0 0;\n  }\n}\n.wlc-user-info--theme-default:host ::ng-deep .wlc-user-info__wrp {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  width: 100%;\n  margin-bottom: 10px;\n}"]})],ot);const at={balance:{name:gettext("Real balance"),path:"realBalance",modification:"amount",wlcElement:"block_user-stat-balance-real"},bonusBalance:{name:gettext("Bonus balance"),path:"bonusBalance",modification:"amount",wlcElement:"block_user-stat-balance-bonus"},points:{name:gettext("LP"),modification:"customCurrency",currency:"LP",path:"loyalty.Balance",wlcElement:"block_user-stat-points"},level:{name:gettext("Level"),path:"loyalty.Level",wlcElement:"block_user-stat-level"},email:{name:gettext("Email"),path:"email",wlcElement:"block_user-stat_email"},firstName:{name:gettext("First name"),path:"firstName",wlcElement:"block_user-stat_firstname"},lastName:{name:gettext("Last name"),path:"lastName",wlcElement:"block_user-stat_lastname"},levelName:{name:gettext("Level name"),path:"levelName",modification:"string",wlcElement:"block_user-stat_level-name"},login:{name:gettext("Login"),path:"loyalty.Login",modification:"string",wlcElement:"block_user-stat_login"},nextLvlPoints:{name:gettext("Next Level Points"),path:"loyalty.NextLevelPoints",wlcElement:"block_user-stat_next-level-points"},expPoints:{name:gettext("EXP"),modification:"customCurrency",currency:"EXP",path:"loyalty.Points",wlcElement:"block_user-stat_expirience-points"},expPointsTotal:{name:gettext("Experience points all time"),path:"loyalty.TotalPoints",wlcElement:"block_user-stat_expirience-points-total"},levelCoef:{name:gettext("Level coefficient"),path:"loyalty.LevelCoef",wlcElement:"block_user-stat_level-coef"},depositCount:{name:gettext("Deposit count"),path:"loyalty.DepositsCount",wlcElement:"block_user-stat_deposit-count"},freespins:{name:gettext("Freespins"),path:"freespins",wlcElement:"block_user-stat_freespins-count"}},rt={class:"wlc-user-stats",moduleName:"user",componentName:"wlc-user-stats",fields:["balance","bonusBalance","points","level"],showTooltipDescriptionModal:!1};var lt=n(67114),ct=n(82560);let dt=class extends O.k{constructor(e,t,n,i,s,o){super({injectParams:e,defaultParams:rt},t),this.injectParams=e,this.configService=t,this.UserService=n,this.cdr=i,this.modalService=s,this.stateService=o,this.type="default",this.useDepositBtn=!0,this.shownUserStats={}}ngOnInit(){switch(super.ngOnInit(this.prepareParams()),this.type){case"short":this.$params.fields=["balance","bonusBalance"];break;case"store":this.$params.fields=["points","expPoints"]}this.userStats=this.UserService.userInfo,this.UserService.userInfo$.pipe((0,j.R)(this.$destroy)).subscribe(e=>{this.userStats=e,this.fillUserStatsFields(),this.cdr.detectChanges()}),(0,lt.Z)(this.$params.useDepositBtn)||(this.useDepositBtn=this.$params.useDepositBtn,this.cdr.markForCheck())}depositAction(){this.stateService.go("app.profile.cash.deposit")}descriptionCasinosCurrency(){this.modalService.showModal("descriptionCasinosCurrency")}prepareParams(){var e;return(null===(e=this.injectParams)||void 0===e?void 0:e.type)&&(this.type=this.injectParams.type),this.inlineParams}fillUserStatsFields(){const e={};(0,L.Z)(this.$params.fields,t=>{e[t]=Object.assign(Object.assign({},at[t]),{value:(0,ct.Z)(this.userStats,at[t].path)})}),this.shownUserStats=e,this.cdr.detectChanges()}};dt.ctorParameters=()=>[{type:void 0,decorators:[{type:s.tBr,args:["injectParams"]}]},{type:l.E4},{type:d.K},{type:s.sBO},{type:V.Z7},{type:k.StateService}],dt.propDecorators={type:[{type:s.IIB}],useDepositBtn:[{type:s.IIB}],inlineParams:[{type:s.IIB}]},dt=(0,i.__decorate)([(0,s.wA2)({selector:"[wlc-user-stats]",template:'<div class="{{$class}}__content" [ngSwitch]="type">\n\n    <ng-template [ngSwitchCase]="\'short\'">\n        <div class="{{$class}}-balance {{$class}}-balance--short" data-wlc-element="block_info">\n            <div class="{{$class}}-balance__item {{$class}}-balance__real" data-wlc-element="user-stat-balance_real">\n                <span class="name">{{\'Real balance\' | translate}}</span>\n                <span class="value">\n                    <span wlc-currency [value]="shownUserStats.balance?.value"></span>\n                </span>\n            </div>\n\n            <div class="{{$class}}-balance__item {{$class}}-balance__bonus" data-wlc-element="user-stat-balance_bonus">\n                <span class="name">{{\'Bonus balance\' | translate}}</span>\n                <span class="value">\n                    <span wlc-currency [value]="shownUserStats.bonusBalance?.value">\n                    </span>\n                </span>\n            </div>\n        </div>\n    </ng-template>\n\n    <ng-template [ngSwitchCase]="\'store\'">\n        <div class="{{$class}}-balance {{$class}}-balance--store"\n             data-wlc-element="block_info"\n             (click)="descriptionCasinosCurrency()">\n            <div class="{{$class}}-balance__item {{$class}}-balance__item--points" [attr.data-wlc-element]="shownUserStats.points?.wlcElement">\n                <span wlc-currency\n                      class="value"\n                      currency="LP"\n                      [value]="shownUserStats.points?.value"\n                ></span>\n            </div>\n            <div class="{{$class}}-balance__item {{$class}}-balance__item--exppoints" [attr.data-wlc-element]="shownUserStats.expPoints?.wlcElement">\n                <span wlc-currency\n                      class="value"\n                      currency="EXP"\n                      [value]="shownUserStats.expPoints?.value"\n                ></span>\n            </div>\n        </div>\n    </ng-template>\n\n    <ng-template [ngSwitchCase]="\'default\'">\n\n        <div class="{{$class}}-balance">\n            <div *ngFor="let item of $params.fields"\n                  class="{{$class}}-balance__item {{$class}}-balance__item--{{item}}"\n                  [attr.data-wlc-element]="shownUserStats[item]?.wlcElement"\n            >\n                <ng-container [ngSwitch]="shownUserStats[item]?.modification">\n\n                    <span class="name">{{shownUserStats[item]?.name | translate}}</span>\n                    <span class="value" *ngSwitchDefault>\n                        {{(shownUserStats[item]?.value | number: \'.0-2\') || \'Unknown\' | translate}}\n                    </span>\n                    <span *ngSwitchCase="\'string\'" class="value">\n                        {{shownUserStats[item]?.value?.toString() || \'Unknown\' | translate}}\n                    </span>\n                    <span *ngSwitchCase="\'amount\'" class="value">\n                        <span wlc-currency [value]="shownUserStats[item]?.value"></span>\n                    </span>\n                    <span *ngSwitchCase="\'customCurrency\'" class="value">\n                        <span wlc-currency\n                              [currency]="shownUserStats[item].currency"\n                              [value]="shownUserStats[item]?.value"\n                              [hideSvgName]="true"\n                        ></span>\n                    </span>\n                </ng-container>\n            </div>\n        </div>\n\n        <button\n            *ngIf="useDepositBtn"\n            wlc-button\n            class="wlc-btn-deposit"\n            text="Deposit"\n            (click)="depositAction()"\n            wlcElement="button-deposit"\n        ></button>\n    </ng-template>\n</div>\n',changeDetection:s.n4l.OnPush,styles:[".wlc-user-stats--theme-default:host .wlc-user-stats {\n  width: 100%;\n  max-width: 270px;\n}\n.wlc-user-stats--theme-default:host .wlc-user-stats-description-currency {\n  position: absolute;\n  top: 50%;\n  right: 0;\n  z-index: 1;\n  transform: translateY(-50%);\n}\n.wlc-user-stats--theme-default:host .wlc-user-stats-description-currency ::ng-deep .wlc-tooltip__icon .wlc-icon-content svg {\n  width: 17px;\n  height: 17px;\n}\n.wlc-user-stats--theme-default:host .wlc-user-stats-balance {\n  background: var(--mc-bg);\n  width: 100%;\n  padding: 5px 15px;\n  border-radius: 10px;\n}\n.wlc-user-stats--theme-default:host .wlc-user-stats-balance--short {\n  background: none;\n  min-width: 180px;\n  padding: 0;\n}\n.wlc-user-stats--theme-default:host .wlc-user-stats-balance--short > div {\n  border-bottom-color: var(--mc-baseOpacity);\n}\n.wlc-user-stats--theme-default:host .wlc-user-stats-balance__item {\n  border-bottom: 2px solid var(--mc-baseOpacity);\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 4px 0;\n}\n.wlc-user-stats--theme-default:host .wlc-user-stats-balance__item:last-child {\n  border-bottom: none;\n}\n.wlc-user-stats--theme-default:host .wlc-user-stats-balance .name {\n  color: var(--mc-baseMain);\n  font-style: normal;\n  font-weight: normal;\n  font-size: 1.2rem;\n  line-height: 1.45;\n  color: var(--mc-baseMain);\n}\n.wlc-user-stats--theme-default:host .wlc-user-stats-balance .value {\n  color: var(--mc-baseMain);\n  font-style: normal;\n  font-weight: bold;\n  font-size: 1.2rem;\n  line-height: 1.25;\n  padding-left: 5px;\n  color: var(--mc-baseMain);\n}\n.wlc-user-stats--theme-default:host .wlc-user-stats-balance .value ::ng-deep .wlc-icon {\n  position: relative;\n  bottom: 1px;\n  display: inline-block;\n}\n.wlc-user-stats--theme-default:host .wlc-user-stats-balance .value ::ng-deep .wlc-icon svg {\n  width: 12px;\n  height: 12px;\n}\n.wlc-user-stats--theme-default:host .wlc-user-stats-balance .name,\n.wlc-user-stats--theme-default:host .wlc-user-stats-balance .value {\n  display: block;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  overflow: hidden;\n}\n.wlc-user-stats--theme-default:host .wlc-user-stats-balance--store {\n  display: flex;\n  flex-direction: column;\n  align-items: flex-end;\n  padding: 0;\n  background: none;\n}\n.wlc-user-stats--theme-default:host .wlc-user-stats-balance--store .wlc-user-stats-balance__item {\n  padding: 0;\n  border-bottom: none;\n}\n.wlc-user-stats--theme-default:host .wlc-user-stats-balance--store .value {\n  transition: color 0.3s linear;\n  color: var(--mc-baseMain);\n  font-style: normal;\n  font-weight: bold;\n  font-size: 1.6rem;\n  line-height: 1.45;\n  display: flex;\n  padding-left: 0;\n}\n.wlc-user-stats--theme-default:host .wlc-user-stats-balance--store .value ::ng-deep .wlc-icon {\n  bottom: 2px;\n}\n.wlc-user-stats--theme-default:host .wlc-user-stats-balance--store .value ::ng-deep .wlc-icon svg {\n  width: 16px;\n  height: 16px;\n}\n@media (pointer: fine) {\n  .wlc-user-stats--theme-default:host .wlc-user-stats-balance--store .value:hover {\n    color: var(--mc-main);\n  }\n}\n@media (pointer: fine) {\n  .wlc-user-stats--theme-default:host .wlc-user-stats-balance--store:hover .value {\n    color: var(--mc-main);\n  }\n}\n.wlc-user-stats--theme-default:host .wlc-user-stats__content .wlc-btn-deposit {\n  margin: 10px auto;\n}"]})],dt);const mt={moduleName:"user",componentName:"wlc-user-name",class:"wlc-user-name",userNameLength:20};let ht=class extends l.k8{constructor(e,t,n,i){super({injectParams:e,defaultParams:mt},t),this.injectParams=e,this.configService=t,this.UserService=n,this.cdr=i}ngOnInit(){super.ngOnInit(this.inlineParams),this.$params.userNameLength=this.userNameLength||this.$params.userNameLength,this.$params.showSvgAsImg=this.showSvgAsImg||this.$params.showSvgAsImg,this.UserService.userProfile$.pipe((0,j.R)(this.$destroy),(0,U.n)(e=>!e)).subscribe(e=>{e.firstName||e.lastName?this.displayedName=`${e.firstName} ${e.lastName}`.trim():this.displayedName=e.email,this.cdr.markForCheck()})}};ht.ctorParameters=()=>[{type:void 0,decorators:[{type:s.tBr,args:["injectParams"]}]},{type:l.E4},{type:d.K},{type:s.sBO}],ht.propDecorators={userNameLength:[{type:s.IIB}],showSvgAsImg:[{type:s.IIB}],inlineParams:[{type:s.IIB}]},ht=(0,i.__decorate)([(0,s.wA2)({selector:"[wlc-user-name]",template:'<div class="{{$class}}__email" data-wlc-element="block_user-stat-username">\n    <div wlc-icon\n         class="{{$class}}__email-icon"\n         wlcElement="wlc-icon-user"\n         iconPath="/wlc/icons/user-icon.svg"\n         [showSvgAsImg]="$params.showSvgAsImg"\n    ></div>\n\n    <div class="{{$class}}__email-value"\n        data-wlc-element="input_email">\n        {{displayedName | truncate: $params.userNameLength}}\n    </div>\n</div>\n',changeDetection:s.n4l.OnPush,styles:[".wlc-user-name--theme-default:host {\n  min-width: 0;\n}\n.wlc-user-name--theme-default:host .wlc-user-name__email {\n  display: flex;\n  align-items: center;\n}\n.wlc-user-name--theme-default:host .wlc-user-name__email-icon::ng-deep {\n  flex-shrink: 0;\n  width: 25px;\n  height: 25px;\n}\n.wlc-user-name--theme-default:host .wlc-user-name__email-icon::ng-deep svg {\n  display: block;\n  width: 100%;\n  height: 100%;\n}\n.wlc-user-name--theme-default:host .wlc-user-name__email-icon::ng-deep svg circle {\n  fill: var(--mc-secondary);\n}\n.wlc-user-name--theme-default:host .wlc-user-name__email-icon::ng-deep svg path {\n  fill: #fff;\n}\n.wlc-user-name--theme-default:host .wlc-user-name__email-value {\n  color: var(--mc-baseMain);\n  font-style: normal;\n  font-weight: normal;\n  font-size: 1.4rem;\n  line-height: 1.45;\n  margin: 0 10px;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}"]})],ht);const pt={class:"wlc-social-networks",componentName:"wlc-social-networks",moduleName:"user",titlePrefix:gettext("Continue with"),iconPath:"wlc/icons/social/oauth/",replaceConfig:{gp:{name:"Google"}}};var ut=n(52182),gt=n(85218);let wt=class extends l.k8{constructor(e,t,n,i,s){super({injectParams:e,defaultParams:pt},t),this.injectParams=e,this.configService=t,this.socialService=n,this.eventService=i,this.cdr=s,this.networks=[],this.connected=[],this._pending=!1}ngOnInit(){const e=Object.create(null,{ngOnInit:{get:()=>super.ngOnInit}});return(0,i.__awaiter)(this,void 0,void 0,function*(){e.ngOnInit.call(this,this.inlineParams),this.getSocialNetworks(),this.configService.get("$user.isAuthenticated")&&this.getUserSocialNetwork()})}getConnectButtonText(e){return this.isProviderConnected(e)?gettext("Disconnect"):gettext("Connect")}isProviderConnected(e){return(0,gt.Z)(this.connected,e)}handleClick(e){return(0,i.__awaiter)(this,void 0,void 0,function*(){this._pending||(this._pending=!0,this.configService.get("$user.isAuthenticated")?yield this.toggleProvider(e):yield this.socialLogin(e),this._pending=!1)})}onImageError(e){e.imgError=!0,this.cdr.markForCheck()}socialLogin(e){return(0,i.__awaiter)(this,void 0,void 0,function*(){const t=yield this.socialService.socialLogin(e);t&&(window.location.href=t)})}toggleProvider(e){return(0,i.__awaiter)(this,void 0,void 0,function*(){if(this.isProviderConnected(e))yield this.socialService.disconnectNetwork(e),yield this.getUserSocialNetwork();else{const t=yield this.socialService.connectNetwork(e);t&&(window.location.href=t)}})}getSocialNetworks(){this.networks=this.prepareList(),this.cdr.markForCheck()}getUserSocialNetwork(){return(0,i.__awaiter)(this,void 0,void 0,function*(){this.connected=(yield this.socialService.getUserNetworks())||[],this.cdr.markForCheck()})}prepareList(){return(0,ut.Z)(this.configService.get("appConfig.socialNetworks"),e=>{const{iconPath:t,replaceConfig:n}=this.$params;return{id:e.id,name:(0,ct.Z)(n,e.id+".name",e.name),iconPath:(0,ct.Z)(n,e.id+".iconPath",t+e.id+".svg")}})}};wt.ctorParameters=()=>[{type:void 0,decorators:[{type:s.tBr,args:["injectParams"]}]},{type:l.E4},{type:P},{type:l.PO},{type:s.sBO}],wt.propDecorators={inlineParams:[{type:s.IIB}]},wt=(0,i.__decorate)([(0,s.wA2)({selector:"[wlc-social-networks]",template:'<div class="{{$class}}__list">\n    <ng-container *ngFor="let network of networks">\n        <button class="{{$class}}__button {{$class}}__button--{{network.id}}"\n            [ngClass]="{\'active\': isProviderConnected(network.id)}"\n            type="button"\n            title="{{$params.titlePrefix | translate}} {{network.name}}"\n            (click)="handleClick(network.id)">\n            <span wlc-icon\n                class="{{$class}}__icon"\n                (imageError)="onImageError(network)"\n                iconPath="{{network.iconPath}}">\n            </span>\n            <span *ngIf="network.imgError" class="{{$class}}__icon">\n                <span class="wlc-icon-content">{{network.id}}</span>\n            </span>\n            <span *ngIf="$params.theme === \'profile\'" class="{{$class}}__text">\n                {{getConnectButtonText(network.id) | translate}}\n            </span>\n        </button>\n    </ng-container>\n</div>\n',changeDetection:s.n4l.OnPush,styles:[".wlc-social-networks--theme-default:host .wlc-social-networks__list {\n  flex-wrap: wrap;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: center;\n  margin: -5px -10px;\n  padding: 0;\n  flex-wrap: wrap;\n}\n.wlc-social-networks--theme-default:host .wlc-social-networks__button {\n  transition: all 0.2s linear;\n  padding: 0 10px 10px 10px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border: none;\n  color: #fff;\n  background: none;\n  padding: 5px 10px;\n}\n.wlc-social-networks--theme-default:host .wlc-social-networks__button--gp .wlc-social-networks__icon {\n  background: #dc4e41;\n}\n.wlc-social-networks--theme-default:host .wlc-social-networks__button--ok .wlc-social-networks__icon {\n  background: #f98d2e;\n}\n.wlc-social-networks--theme-default:host .wlc-social-networks__button--ya .wlc-social-networks__icon {\n  background: #ffcc00;\n}\n.wlc-social-networks--theme-default:host .wlc-social-networks__button--vk .wlc-social-networks__icon {\n  background: #4b729f;\n}\n.wlc-social-networks--theme-default:host .wlc-social-networks__button--ml .wlc-social-networks__icon {\n  background: #277ebc;\n}\n.wlc-social-networks--theme-default:host .wlc-social-networks__button--fb .wlc-social-networks__icon {\n  background: #3b5999;\n}\n.wlc-social-networks--theme-default:host .wlc-social-networks__button--in .wlc-social-networks__icon {\n  background: linear-gradient(49.12deg, #ffdd55 6.62%, #ff543e 50.06%, #c837ab 93.5%);\n}\n@media (min-width: 480px) {\n  .wlc-social-networks--theme-default:host .wlc-social-networks__button {\n    padding: 0 10px;\n  }\n}\n@media (pointer: fine) {\n  .wlc-social-networks--theme-default:host .wlc-social-networks__button:hover .wlc-social-networks__icon {\n    box-shadow: 0 0 0 3px #598cfb;\n  }\n}\n.wlc-social-networks--theme-default:host .wlc-social-networks__icon {\n  transition: all 0.2s linear;\n  width: 40px;\n  height: 40px;\n  color: currentColor;\n  background: #0e1c34;\n  border-radius: 50%;\n  box-shadow: none;\n}\n.wlc-social-networks--theme-default:host .wlc-social-networks__icon ::ng-deep .wlc-icon-content {\n  width: 100%;\n  height: 100%;\n}\n.wlc-social-networks--theme-default:host .wlc-social-networks__icon ::ng-deep img.wlc-icon-content {\n  display: block;\n  border-radius: 50%;\n  -o-object-fit: cover;\n     object-fit: cover;\n}\n.wlc-social-networks--theme-default:host .wlc-social-networks__icon ::ng-deep span.wlc-icon-content {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.wlc-social-networks--theme-default:host .wlc-social-networks__icon ::ng-deep span.wlc-icon-content svg {\n  max-width: 100%;\n  max-height: 100%;\n  fill: currentColor;\n}\n.wlc-social-networks--theme-profile:host .wlc-social-networks__list {\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  justify-content: flex-start;\n  margin: 0;\n  padding: 0;\n}\n.wlc-social-networks--theme-profile:host .wlc-social-networks__button {\n  transition: all 0.2s linear;\n  padding: 0 10px 10px 10px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border: none;\n  color: #fff;\n  background: none;\n  margin: 0 0 20px 0;\n}\n.wlc-social-networks--theme-profile:host .wlc-social-networks__button--gp .wlc-social-networks__icon {\n  background: #dc4e41;\n}\n.wlc-social-networks--theme-profile:host .wlc-social-networks__button--ok .wlc-social-networks__icon {\n  background: #f98d2e;\n}\n.wlc-social-networks--theme-profile:host .wlc-social-networks__button--ya .wlc-social-networks__icon {\n  background: #ffcc00;\n}\n.wlc-social-networks--theme-profile:host .wlc-social-networks__button--vk .wlc-social-networks__icon {\n  background: #4b729f;\n}\n.wlc-social-networks--theme-profile:host .wlc-social-networks__button--ml .wlc-social-networks__icon {\n  background: #277ebc;\n}\n.wlc-social-networks--theme-profile:host .wlc-social-networks__button--fb .wlc-social-networks__icon {\n  background: #3b5999;\n}\n.wlc-social-networks--theme-profile:host .wlc-social-networks__button--in .wlc-social-networks__icon {\n  background: linear-gradient(49.12deg, #ffdd55 6.62%, #ff543e 50.06%, #c837ab 93.5%);\n}\n@media (min-width: 480px) {\n  .wlc-social-networks--theme-profile:host .wlc-social-networks__button {\n    padding: 0 10px;\n  }\n}\n@media (pointer: fine) {\n  .wlc-social-networks--theme-profile:host .wlc-social-networks__button:hover .wlc-social-networks__icon {\n    box-shadow: 0 0 0 3px #598cfb;\n  }\n}\n.wlc-social-networks--theme-profile:host .wlc-social-networks__button:last-child {\n  margin: 0;\n}\n.wlc-social-networks--theme-profile:host .wlc-social-networks__text {\n  margin: 0 0 0 5px;\n}\n.wlc-social-networks--theme-profile:host .wlc-social-networks__icon {\n  transition: all 0.2s linear;\n  width: 40px;\n  height: 40px;\n  color: currentColor;\n  background: #0e1c34;\n  border-radius: 50%;\n  box-shadow: none;\n}\n.wlc-social-networks--theme-profile:host .wlc-social-networks__icon ::ng-deep .wlc-icon-content {\n  width: 100%;\n  height: 100%;\n}\n.wlc-social-networks--theme-profile:host .wlc-social-networks__icon ::ng-deep img.wlc-icon-content {\n  display: block;\n  border-radius: 50%;\n  -o-object-fit: cover;\n     object-fit: cover;\n}\n.wlc-social-networks--theme-profile:host .wlc-social-networks__icon ::ng-deep span.wlc-icon-content {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.wlc-social-networks--theme-profile:host .wlc-social-networks__icon ::ng-deep span.wlc-icon-content svg {\n  max-width: 100%;\n  max-height: 100%;\n  fill: currentColor;\n}"]})],wt);const ft={class:"wlc-social-sign-up-form",componentName:"wlc-social-sign-up-form",moduleName:"user",wlcElement:"modal_social_signup"},vt={class:"wlc-form-wrapper",components:[{name:Se.D.firstName.name,params:Object.assign(Object.assign({},Se.D.firstName.params),{locked:!1})},{name:Se.D.lastName.name,params:Object.assign(Object.assign({},Se.D.lastName.params),{locked:!1})},{name:Se.D.email.name,params:Object.assign(Object.assign({},Se.D.email.params),{locked:!1,validators:["required","email","emailUnique"]})},{name:"core.wlc-input",params:{theme:"vertical",wlcElement:"block_password-current",common:{placeholder:gettext("Password"),type:"password",customModifiers:"right-shift password",fixAutoCompleteForm:!1,usePasswordVisibilityBtn:!0},name:"password",validators:["required","password",{name:"minLength",options:6},{name:"maxLength",options:50}]}},Se.D.currency,Se.D.promocode,Se.D.terms,Se.D.age,Se.D.signUp]};let xt=class extends Fe{constructor(e,t,n,i,s,o){super({injectParams:e,defaultParams:ft},t,i,s,n),this.injectParams=e,this.configService=t,this.logService=n,this.userService=i,this.eventService=s,this.socialService=o}ngOnInit(){super.ngOnInit(),this.config=this.$params.formConfig||vt,this.$params.formData&&(this.formData=new I.X(this.$params.formData))}ngSubmit(e){return(0,i.__awaiter)(this,void 0,void 0,function*(){try{if(e.disable(),!this.checkConfirmation(e))return;const t=this.formDataPreparation(e);yield this.socialService.socialRegisterComplete(t.data),window.location.reload()}catch(t){this.showRegError(t,"1.5.3",gettext("Social registration failed"))}finally{e.enable()}})}};xt.ctorParameters=()=>[{type:void 0,decorators:[{type:s.tBr,args:["injectParams"]}]},{type:l.E4},{type:l.$V},{type:d.K},{type:l.PO},{type:P}],xt=(0,i.__decorate)([(0,s.wA2)({selector:"[wlc-social-sign-up-form]",template:'<div wlc-form-wrapper\n    [config]="config"\n    [ngSubmit]="ngSubmit.bind(this)"\n    [formData]="formData">\n</div>\n',changeDetection:s.n4l.OnPush,styles:[".wlc-sign-up-form--theme-default:host {\n  display: flex;\n  flex-direction: column;\n  max-width: 320px;\n  height: 100%;\n  margin: 0 auto;\n}\n.wlc-sign-up-form--theme-default:host::ng-deep .wlc-form-wrapper {\n  height: 100%;\n}\n.wlc-sign-up-form--theme-default:host::ng-deep .wlc-form {\n  display: grid;\n  grid-gap: 20px 15px;\n  grid-template-columns: 100px 1fr;\n  align-content: start;\n  height: 100%;\n}\n.wlc-sign-up-form--theme-default:host::ng-deep .wlc-form > .wlc-btn {\n  margin: 0 auto;\n}\n.wlc-sign-up-form--theme-default:host::ng-deep ::ng-deep .wlc-select .wlc-select__group .wlc-select__field:disabled {\n  color: var(--fc-textColor);\n  background: var(--fc-inputBg);\n}\n.wlc-sign-up-form--theme-default:host::ng-deep .wlc-input,\n.wlc-sign-up-form--theme-default:host::ng-deep .wlc-select,\n.wlc-sign-up-form--theme-default:host::ng-deep .wlc-checkbox,\n.wlc-sign-up-form--theme-default:host::ng-deep .wlc-btn,\n.wlc-sign-up-form--theme-default:host::ng-deep .wlc-birth-field,\n.wlc-sign-up-form--theme-default:host::ng-deep .wlc-link-block,\n.wlc-sign-up-form--theme-default:host::ng-deep .wlc-social-networks,\n.wlc-sign-up-form--theme-default:host::ng-deep .wlc-phone-field {\n  grid-column: span 2;\n}\n.wlc-sign-up-form--theme-default:host::ng-deep .wlc-input--promocode,\n.wlc-sign-up-form--theme-default:host::ng-deep .wlc-select--currency {\n  grid-column: span 1;\n}\n.wlc-sign-up-form--theme-default:host::ng-deep .wlc-checkbox--terms {\n  padding: 20px 10px 0 10px;\n}\n.wlc-sign-up-form--theme-default:host::ng-deep .wlc-checkbox--terms .wlc-checkbox__label {\n  position: relative;\n}\n.wlc-sign-up-form--theme-default:host::ng-deep .wlc-checkbox--age {\n  margin: -17px 0 0;\n  padding: 0 10px 20px 10px;\n}\n.wlc-sign-up-form--theme-default:host::ng-deep .wlc-checkbox--age .wlc-checkbox__label {\n  position: relative;\n}\n.wlc-sign-up-form--theme-default:host::ng-deep .wlc-select[wlc-select] .wlc-select__field,\n.wlc-sign-up-form--theme-default:host::ng-deep .wlc-select[wlc-select] .wlc-select__dropdown-item {\n  padding: 7px 35px 7px 13px;\n}\n.wlc-sign-up-form--theme-default:host::ng-deep .wlc-checkbox[wlc-checkbox] .wlc-checkbox__link {\n  color: var(--mc-main);\n  text-decoration: underline;\n  transition: color 0.3s linear, border-bottom-color 0.3s linear;\n}\n@media (pointer: fine) {\n  .wlc-sign-up-form--theme-default:host::ng-deep .wlc-checkbox[wlc-checkbox] .wlc-checkbox__link:hover {\n    color: var(--mc-baseMain);\n  }\n}\n.wlc-sign-up-form--theme-default:host::ng-deep .wlc-birth-field {\n  grid-template-columns: repeat(3, 1fr);\n}\n.wlc-sign-up-form--theme-default:host::ng-deep .wlc-birth-field .wlc-select {\n  grid-column: span 1;\n}\n.wlc-sign-up-form--theme-default:host::ng-deep .wlc-phone-field {\n  grid-template-columns: 100px 1fr;\n  grid-gap: 20px 15px;\n  gap: 20px 15px;\n  padding: 0;\n  margin: 0;\n}\n.wlc-sign-up-form--theme-default:host::ng-deep .wlc-phone-field .wlc-input,\n.wlc-sign-up-form--theme-default:host::ng-deep .wlc-phone-field .wlc-select {\n  grid-column: initial;\n}\n.wlc-sign-up-form--theme-default:host.mga-license ::ng-deep .wlc-form > .wlc-btn {\n  margin: 20px auto 0;\n}\n.wlc-sign-up-form--theme-default:host.mga-license ::ng-deep .wlc-form .wlc-checkbox {\n  padding: 0 10px;\n}\n.wlc-social-sign-up-form--theme-default:host {\n  display: flex;\n  flex-direction: column;\n  max-width: 320px;\n  height: 100%;\n  margin: 0 auto;\n}\n.wlc-social-sign-up-form--theme-default:host::ng-deep .wlc-form-wrapper {\n  height: 100%;\n}\n.wlc-social-sign-up-form--theme-default:host::ng-deep .wlc-form {\n  display: grid;\n  grid-gap: 20px 15px;\n  grid-template-columns: 100px 1fr;\n  align-content: start;\n  height: 100%;\n}\n.wlc-social-sign-up-form--theme-default:host::ng-deep .wlc-form > .wlc-btn {\n  margin: 0 auto;\n  grid-area: btn;\n}\n.wlc-social-sign-up-form--theme-default:host::ng-deep ::ng-deep .wlc-input .wlc-input__container .wlc-input__input:disabled {\n  color: var(--fc-textColor);\n  background: var(--fc-inputBg);\n  opacity: 1;\n}\n.wlc-social-sign-up-form--theme-default:host::ng-deep ::ng-deep .wlc-select .wlc-select__group .wlc-select__field:disabled {\n  color: var(--fc-textColor);\n  background: var(--fc-inputBg);\n}\n.wlc-social-sign-up-form--theme-default:host::ng-deep .wlc-text-block {\n  grid-area: head;\n}\n.wlc-social-sign-up-form--theme-default:host::ng-deep .wlc-input--email {\n  grid-area: email;\n}\n.wlc-social-sign-up-form--theme-default:host::ng-deep .wlc-input--password {\n  grid-area: password;\n}\n.wlc-social-sign-up-form--theme-default:host::ng-deep .wlc-input--promocode {\n  grid-area: promocode;\n}\n.wlc-social-sign-up-form--theme-default:host::ng-deep .wlc-checkbox--terms {\n  padding: 20px 10px 0 10px;\n  grid-area: terms;\n}\n.wlc-social-sign-up-form--theme-default:host::ng-deep .wlc-checkbox--terms .wlc-checkbox__label {\n  position: relative;\n}\n.wlc-social-sign-up-form--theme-default:host::ng-deep .wlc-checkbox--age {\n  margin: -17px 0 0;\n  padding: 0 10px 20px 10px;\n  grid-area: age;\n}\n.wlc-social-sign-up-form--theme-default:host::ng-deep .wlc-checkbox--age .wlc-checkbox__label {\n  position: relative;\n}\n.wlc-social-sign-up-form--theme-default:host::ng-deep .wlc-link-block {\n  grid-area: account;\n}\n.wlc-social-sign-up-form--theme-default:host::ng-deep .wlc-select[wlc-select] .wlc-select__field,\n.wlc-social-sign-up-form--theme-default:host::ng-deep .wlc-select[wlc-select] .wlc-select__dropdown-item {\n  padding: 7px 35px 7px 13px;\n}\n.wlc-social-sign-up-form--theme-default:host::ng-deep .wlc-select[wlc-select] .wlc-select--currency {\n  grid-area: currency;\n}\n.wlc-social-sign-up-form--theme-default:host::ng-deep .wlc-checkbox[wlc-checkbox] .wlc-checkbox__link {\n  color: var(--mc-main);\n  text-decoration: underline;\n  transition: color 0.3s linear, border-bottom-color 0.3s linear;\n}\n@media (pointer: fine) {\n  .wlc-social-sign-up-form--theme-default:host::ng-deep .wlc-checkbox[wlc-checkbox] .wlc-checkbox__link:hover {\n    color: var(--mc-baseMain);\n  }\n}\n.wlc-social-sign-up-form--theme-default:host::ng-deep .wlc-input--first-name[wlc-input] {\n  grid-area: firstName;\n}\n.wlc-social-sign-up-form--theme-default:host::ng-deep .wlc-input--last-name[wlc-input] {\n  grid-area: lastName;\n}"]})],xt);const yt={"user-service":d.K,"social-service":P,"limitation-service":_,"idle-service":T},bt={"wlc-add-profile-info":B,"wlc-change-password-form":N,"wlc-exchange":q,"wlc-icon-exp-lp":K,"wlc-limitations":le,"wlc-logout":de,"wlc-loyalty-block":F,"wlc-loyalty-progress":he,"wlc-new-password-form":ge,"wlc-profile-form":$e,"wlc-phone-field":_e,"wlc-reality-check-info":Te,"wlc-restore-link":De,"wlc-restore-password-form":Ae,"wlc-sign-in-form":Ve,"wlc-sign-up-form":We,"wlc-social-networks":wt,"wlc-social-sign-up-form":xt,"wlc-sms-verification":nt,"wlc-user-info":ot,"wlc-user-stats":dt,"wlc-user-name":ht};let _t=class{};_t=(0,i.__decorate)([(0,s.LVF)({declarations:[B,N,F,q,K,le,X,Q,de,he,ge,$e,_e,Te,De,Ae,Ve,We,nt,wt,xt,ot,dt,ht],imports:[o.ez,c.CoreModule,r.aw,a.MT],providers:[l.Do,d.K,_,P,p],exports:[B,N,F,q,K,le,de,he,$e,_e,Te,Ae,Ve,We,nt,wt,xt,ot,dt,ht]})],_t)}}]);